{"version":3,"file":"index.js","sources":["../../node_modules/@neep/core/node_modules/monitorable/dist/monitorable.esm.js","../../node_modules/@neep/core/dist/neep.core.mjs","../../node_modules/@neep/web-render/dist/neep.web.render.mjs","../../node_modules/@neep/devtools/dist/neep.devtools.mjs","../../src/install/installContextConstructor.ts","../../src/InsertView.ts","../../src/install/installComponents.ts","../../src/install/install.ts","../../src/Insertable.ts","../App.tsx","../index.tsx"],"sourcesContent":["\n/*!\n * monitorable v0.1.0-beta.0\n * (c) 2020 Fierflame\n * @license MIT\n */\n\nlet printErrorLog;\n/** 打印错误 */\n\nfunction printError(info) {\n  if (typeof printErrorLog === 'function') {\n    printErrorLog(info);\n    return;\n  }\n\n  console.error(info);\n}\nfunction setPrintError(p) {\n  printErrorLog = typeof p === 'function' ? p : undefined;\n}\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n/** 回调函数安全化处理 */\n\nfunction safeify(fn) {\n  return (...p) => {\n    try {\n      fn(...p);\n    } catch (e) {\n      printError(e);\n    }\n  };\n}\nfunction getIndexes(target, prop) {\n  if (!target) {\n    return undefined;\n  }\n\n  if (typeof target !== 'function' && typeof target !== 'object') {\n    return undefined;\n  }\n\n  if (typeof prop === 'number') {\n    return [target, String(prop)];\n  }\n\n  if (typeof prop === 'symbol') {\n    return [target, prop];\n  }\n\n  if (typeof prop === 'string') {\n    return [target, prop];\n  }\n\n  if (typeof prop === 'boolean') {\n    return [target, prop];\n  }\n\n  return undefined;\n}\nfunction getMapValue(map, key, def) {\n  if (map.has(key)) {\n    return map.get(key);\n  }\n\n  const value = def();\n  map.set(key, value);\n  return value;\n}\n\n/** 已被读取的 */\nlet read;\n/**\n * 标记已读状态\n * @param obj  要标记的对象\n * @param prop 要标记的属性\n */\n\nfunction markRead(target, prop) {\n  if (!read) {\n    return;\n  }\n\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return;\n  }\n\n  [target, prop] = indexes;\n  const propMap = getMapValue(read, target, () => new Map());\n\n  if (propMap.has(prop)) {\n    return;\n  }\n\n  propMap.set(prop, false);\n}\n\n/**\n * 监听函数的执行，并将执行过程中读取的对象值设置到 map 中\n * @param fn 要执行的含糊\n * @param map 用于存储被读取对象的 map\n */\nfunction observeRun(map, fn, options) {\n  const oldRead = read;\n  read = map;\n\n  try {\n    if (!(options === null || options === void 0 ? void 0 : options.postpone)) {\n      return fn();\n    }\n\n    return postpone(fn, options.postpone === 'priority');\n  } finally {\n    read = oldRead;\n  }\n}\nfunction observe(map, fn, options) {\n  if (typeof fn === 'function') {\n    return observeRun(map, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return observeRun(map, options, fn);\n}\nconst watchList = new WeakMap();\n\nfunction execWatch(target, prop) {\n  var _watchList$get;\n\n  const watch = (_watchList$get = watchList.get(target)) === null || _watchList$get === void 0 ? void 0 : _watchList$get.get(prop);\n\n  if (!watch) {\n    return;\n  }\n\n  [...watch].forEach(w => w());\n}\n\nlet waitList;\n\nfunction run(list) {\n  for (const [target, set] of list.entries()) {\n    var _read;\n\n    const propMap = (_read = read) === null || _read === void 0 ? void 0 : _read.get(target);\n\n    for (const prop of set) {\n      execWatch(target, prop);\n\n      if (propMap === null || propMap === void 0 ? void 0 : propMap.has(prop)) {\n        propMap.set(prop, true);\n      }\n    }\n  }\n}\n\nfunction postponeRun(f, priority) {\n  const list = !priority && waitList || new Map();\n  const old = waitList;\n  waitList = list;\n\n  try {\n    return f();\n  } finally {\n    waitList = old;\n\n    if (list !== waitList) {\n      run(list);\n    }\n  }\n}\n\nfunction postpone(fn, priority) {\n  if (typeof fn === 'function') {\n    return postponeRun(fn, priority);\n  }\n\n  if (typeof priority !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return postponeRun(priority, fn);\n}\n\nfunction wait(target, prop) {\n  if (!waitList) {\n    return false;\n  }\n\n  getMapValue(waitList, target, () => new Set()).add(prop);\n  return true;\n}\n/**\n * 标记属性的修改，同时触发监听函数\n * @param target 要标记的对象\n * @param prop   要标记的属性 特别的，false 表示原型，true 表示成员\n */\n\n\nfunction markChange(target, prop) {\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return;\n  }\n\n  [target, prop] = indexes;\n\n  if (wait(target, prop)) {\n    return;\n  }\n\n  execWatch(target, prop);\n}\n/**\n * 观察对象属性的变化\n * @param target 要观察的对象\n * @param prop   要观察的属性名 特别的，false 表示原型，true 表示成员\n * @param fn     属性改变后触发的函数\n */\n\nfunction watchProp(target, prop, cb) {\n  if (typeof cb !== 'function') {\n    return () => {};\n  }\n\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return () => {};\n  }\n\n  [target, prop] = indexes;\n  const key = prop;\n  let map = watchList.get(target);\n\n  if (!map) {\n    map = new Map();\n    watchList.set(target, map);\n  }\n\n  const list = getMapValue(map, key, () => new Set());\n  cb = safeify(cb);\n  list.add(cb);\n  let removed = false;\n  return () => {\n    if (removed) {\n      return;\n    }\n\n    removed = true; // 从当前列表中移除\n\n    list.delete(cb); // 从属性关联中删除\n\n    if (list.size) {\n      return;\n    }\n\n    if (!map) {\n      return;\n    }\n\n    map.delete(key); // 映射列表中删除\n\n    if (map.size) {\n      return;\n    }\n\n    watchList.delete(target);\n  };\n}\n\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable$1(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n\nlet getValue;\n/**\n * 获取被代理对象\n * @param obj  要被代理的对象\n * @param nest 递归代理的层数\n */\n\nfunction encase(value, nest = 0) {\n  if (!encashable$1(value)) {\n    return value;\n  }\n\n  const original = recover(value);\n  const nestLayer = nest === true ? Infinity : nest || 0;\n  const proxy = new Proxy(original, {\n    set(target, prop, value, receiver) {\n      if (nest === false) {\n        return Reflect.set(target, prop, value, receiver);\n      }\n\n      const has = Reflect.has(target, prop);\n      const modified = Reflect.set(target, prop, value, encase(receiver));\n\n      if (!modified) {\n        return modified;\n      }\n\n      if (has !== Reflect.has(target, prop)) {\n        markChange(target, true);\n      }\n\n      return modified;\n    },\n\n    get(target, prop, receiver) {\n      if (getValue === proxy) {\n        if (prop === '__monitorable__recover__') {\n          getValue = original;\n          return;\n        }\n      }\n\n      if (nest === false) {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      markRead(target, prop);\n      const value = Reflect.get(target, prop, encase(receiver));\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    setPrototypeOf(target, proto) {\n      if (nest === false) {\n        return Reflect.setPrototypeOf(target, proto);\n      }\n\n      const oldProto = Reflect.getPrototypeOf(target);\n      const modified = Reflect.setPrototypeOf(target, proto);\n\n      if (modified && oldProto !== proto) {\n        markChange(target, false);\n      }\n\n      return modified;\n    },\n\n    getPrototypeOf(target) {\n      if (nest === false) {\n        return Reflect.getPrototypeOf(target);\n      }\n\n      markRead(target, false);\n      const value = Reflect.getPrototypeOf(target);\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    defineProperty(target, prop, attr) {\n      if (nest === false) {\n        return Reflect.defineProperty(target, prop, attr);\n      }\n\n      let changed = true;\n\n      if ('value' in attr) {\n        const desc = Reflect.getOwnPropertyDescriptor(target, prop);\n\n        if (desc && 'value' in desc && recover(attr.value) === recover(desc.value)) {\n          changed = false;\n        }\n      }\n\n      const modified = Reflect.defineProperty(target, prop, attr);\n\n      if (changed && modified) {\n        markChange(target, prop);\n      }\n\n      return modified;\n    },\n\n    getOwnPropertyDescriptor(target, prop) {\n      if (nest === false) {\n        return Reflect.getOwnPropertyDescriptor(target, prop);\n      }\n\n      markRead(target, prop);\n      return Reflect.getOwnPropertyDescriptor(target, prop);\n    },\n\n    deleteProperty(target, prop) {\n      if (nest === false) {\n        return Reflect.deleteProperty(target, prop);\n      }\n\n      const has = Reflect.has(target, prop);\n      const deleted = Reflect.deleteProperty(target, prop);\n\n      if (has && !Reflect.has(target, prop)) {\n        markChange(target, prop);\n        markChange(target, true);\n      }\n\n      return deleted;\n    },\n\n    ownKeys(target) {\n      if (nest === false) {\n        return Reflect.ownKeys(target);\n      }\n\n      markRead(target, true);\n      return Reflect.ownKeys(target);\n    },\n\n    has(target, prop) {\n      if (nest === false) {\n        return Reflect.has(target, prop);\n      }\n\n      markRead(target, true);\n      return Reflect.has(target, prop);\n    }\n\n  });\n  return proxy;\n}\n/** 获取被代理的原始值 */\n\nfunction recover(v) {\n  if (!v) {\n    return v;\n  }\n\n  if (!encashable$1(v)) {\n    return v;\n  }\n\n  let value = v;\n\n  try {\n    getValue = v;\n    value = v.__monitorable__recover__;\n  } catch (_unused) {}\n\n  value = getValue;\n  getValue = false;\n\n  if (!value) {\n    return v;\n  }\n\n  if (typeof value === 'object') {\n    return value;\n  }\n\n  if (typeof value === 'function') {\n    return value;\n  }\n\n  return v;\n}\nfunction equal(a, b) {\n  return recover(a) === recover(b);\n}\n\nfunction run$1(cb, fn, options) {\n  cb = safeify(cb);\n  let cancelList;\n  const postpone = options === null || options === void 0 ? void 0 : options.postpone;\n  let end = false;\n  /** 取消监听 */\n\n  function cancel() {\n    if (end) {\n      return false;\n    }\n\n    end = true;\n\n    if (!cancelList) {\n      return true;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n\n  function run(thisRead) {\n    if (end) {\n      return false;\n    }\n\n    if (!thisRead.size) {\n      end = true;\n      return cb(false);\n    }\n\n    const list = [];\n\n    for (let [obj, props] of thisRead) {\n      for (const [p, m] of props) {\n        if (m) {\n          return cb(true);\n        }\n\n        list.push([obj, p]);\n      }\n    }\n\n    cancelList = list.map(([obj, p]) => watchProp(recover(obj), p, trigger));\n  }\n\n  function stop() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(false);\n  }\n  const thisRead = new Map();\n  const result = observe(thisRead, () => fn(stop), {\n    postpone\n  });\n  run(thisRead);\n\n  if (options === null || options === void 0 ? void 0 : options.resultOnly) {\n    return result;\n  }\n\n  return {\n    result,\n    stop\n  };\n}\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\n\n\nfunction exec(cb, fn, options) {\n  if (typeof cb !== 'function') {\n    throw new Error('cb needs to be a function');\n  }\n\n  if (typeof fn === 'function') {\n    return run$1(cb, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return run$1(cb, options, fn);\n}\n\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\nfunction create(cb, fn, options) {\n  cb = safeify(cb);\n  let cancelList;\n  /** 取消监听 */\n\n  function cancel() {\n    if (!cancelList) {\n      return false;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n\n  function run(thisRead) {\n    if (!thisRead.size) {\n      return cb(false);\n    }\n\n    const list = [];\n\n    for (let [obj, props] of thisRead) {\n      for (const [p, m] of props) {\n        if (m) {\n          return cb(true);\n        }\n\n        list.push([obj, p]);\n      }\n    }\n\n    cancelList = list.map(([obj, p]) => watchProp(recover(obj), p, trigger));\n  }\n\n  function exec(...p) {\n    cancel();\n    const thisRead = new Map();\n    const result = observe(thisRead, () => fn(...p), options);\n    run(thisRead);\n    return result;\n  }\n\n  exec.stop = () => {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(false);\n  };\n\n  return exec;\n}\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\n\n\nfunction monitor(cb, fn, options) {\n  if (typeof fn === 'function') {\n    return create(cb, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return create(cb, options, fn);\n}\n\n/** 取消监听的方法 */\n\nconst values = new WeakSet();\nfunction isValue(x) {\n  return values.has(x);\n}\n/** 触发监听 */\n\nfunction valueOf() {\n  const value = this();\n\n  if (value === undefined) {\n    return value;\n  }\n\n  if (value === null) {\n    return value;\n  }\n\n  return value.valueOf();\n}\n\nfunction toString(...p) {\n  const value = this();\n\n  if (value === undefined) {\n    return String(value);\n  }\n\n  if (value === null) {\n    return String(value);\n  }\n\n  if (typeof value.toString === 'function') {\n    return value.toString(...p);\n  }\n\n  return String(value);\n}\n\nfunction toPrimitive(hint) {\n  const value = this();\n\n  if (value === undefined) {\n    return String(value);\n  }\n\n  if (value === null) {\n    return String(value);\n  }\n\n  if (typeof value[Symbol.toPrimitive] === 'function') {\n    return value[Symbol.toPrimitive](hint);\n  }\n\n  if (hint === 'string') {\n    return String(value);\n  }\n\n  if (hint === 'number') {\n    return Number(value);\n  }\n\n  return value;\n}\n\nfunction createValue(recover, setValue, stop = () => {}, change = () => {}) {\n  function set(v, marked = false) {\n    if (!setValue) {\n      return;\n    }\n\n    try {\n      setValue(v, () => {\n        marked = true;\n      });\n    } finally {\n      if (marked) {\n        trigger();\n      }\n    }\n  }\n\n  function get() {\n    markRead(value, 'value');\n    return recover();\n  }\n\n  const value = (...v) => {\n    if (v.length) {\n      set(v[0], v[1]);\n      return v[0];\n    }\n\n    return get();\n  };\n\n  Reflect.defineProperty(value, 'value', {\n    get,\n    set,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, 'valueOf', {\n    value: valueOf,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, 'toString', {\n    value: toString,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, Symbol.toPrimitive, {\n    value: toPrimitive,\n    enumerable: true,\n    configurable: true\n  });\n\n  function watch(cb) {\n    if (!callbacks) {\n      return () => {};\n    }\n\n    cb = safeify(cb);\n    callbacks.push(cb);\n    change();\n    let cancelled = false;\n    return () => {\n      if (cancelled) {\n        return;\n      }\n\n      cancelled = true;\n\n      if (!callbacks) {\n        return;\n      }\n\n      const index = callbacks.findIndex(a => a === cb);\n\n      if (index < 0) {\n        return;\n      }\n\n      callbacks.splice(index, 1);\n      change();\n    };\n  }\n\n  let callbacks = [];\n  Reflect.defineProperty(value, 'watch', {\n    get() {\n      return watch;\n    },\n\n    set() {},\n\n    configurable: true\n  });\n\n  const trigger = () => {\n    if (!callbacks) {\n      return;\n    }\n\n    markChange(value, 'value');\n\n    for (const cb of [...callbacks]) {\n      cb(value, false);\n    }\n  };\n\n  trigger.has = () => {\n    var _callbacks;\n\n    return Boolean((_callbacks = callbacks) === null || _callbacks === void 0 ? void 0 : _callbacks.length);\n  };\n\n  trigger.stop = () => {\n    if (!callbacks) {\n      return;\n    }\n\n    const list = callbacks;\n    callbacks = undefined;\n\n    for (const cb of [...list]) {\n      cb(value, true);\n    }\n  };\n\n  values.add(value);\n  let stopped = false;\n\n  value.stop = () => {\n    if (stopped) {\n      return;\n    }\n\n    stopped = true;\n    stop();\n    trigger.stop();\n  };\n\n  return {\n    value,\n    trigger\n  };\n}\n/**\n * 创建引用值\n * @param value 初始值\n * @param options 选项\n */\n\n\nfunction value(def, options) {\n  const proxy = options === true || options && options.proxy;\n  let source;\n  let proxyValue;\n  const {\n    value\n  } = createValue(() => proxyValue, (v, mark) => {\n    if (proxy) {\n      v = recover(v);\n    }\n\n    if (v === source) {\n      return;\n    }\n\n    source = v;\n    proxyValue = proxy ? encase(source) : source;\n    mark();\n  });\n  value(def);\n  return value;\n}\nfunction computed(getter, setter, options) {\n  var _options;\n\n  if (typeof setter !== 'function') {\n    options = setter;\n    setter = undefined;\n  }\n\n  const setValue = setter;\n  const proxy = options === true || options && options.proxy;\n  const postpone = typeof options === 'object' && ((_options = options) === null || _options === void 0 ? void 0 : _options.postpone);\n  let source;\n  let proxyValue;\n  let stopped = false;\n  let computed = false;\n  let trigger;\n  const executable = monitor(changed => {\n    computed = !changed;\n\n    if (changed && trigger) {\n      trigger();\n    }\n  }, getter, {\n    postpone\n  });\n\n  function run() {\n    computed = true;\n\n    try {\n      source = executable();\n\n      if (proxy) {\n        source = recover(source);\n      }\n\n      proxyValue = proxy ? encase(source) : source;\n      return proxyValue;\n    } catch (e) {\n      if (!stopped) {\n        computed = false;\n      }\n\n      throw e;\n    }\n  }\n\n  let value;\n  ({\n    value,\n    trigger\n  } = createValue(() => computed || stopped ? proxyValue : run(), setValue && (v => setValue(proxy ? recover(v) : v)), () => {\n    if (stopped) {\n      return;\n    }\n\n    stopped = true;\n\n    if (computed) {\n      return;\n    }\n\n    run();\n  }));\n  return value;\n}\nfunction merge(cb) {\n  let oldValue;\n  let ran = false;\n  return (v, stopped) => {\n    if (stopped) {\n      return cb(v, stopped);\n    }\n\n    const newValue = recover(v());\n\n    if (newValue === oldValue && ran) {\n      return;\n    }\n\n    ran = true;\n    oldValue = newValue;\n    cb(v, stopped);\n  };\n}\nfunction mix(source) {\n  for (const k of Reflect.ownKeys(source)) {\n    const descriptor = Reflect.getOwnPropertyDescriptor(source, k);\n\n    if (!descriptor) {\n      continue;\n    }\n\n    if (!('value' in descriptor) || 'get' in descriptor || 'set' in descriptor) {\n      continue;\n    }\n\n    const value = descriptor.value;\n\n    if (!isValue(value)) {\n      continue;\n    }\n\n    descriptor.get = () => value.value;\n\n    if (descriptor.writable) {\n      descriptor.set = v => value.value = v;\n    }\n\n    delete descriptor.value;\n    delete descriptor.writable;\n    Reflect.defineProperty(source, k, descriptor);\n  }\n\n  return source;\n}\n\nfunction createValue$1(props, key, def = value(undefined), set) {\n  function setValue(value, setted) {\n    if (!set) {\n      return;\n    }\n\n    set(value, setted);\n  }\n\n  return computed(() => {\n    if (!(key in props)) {\n      return def();\n    }\n\n    const p = props[key];\n    return isValue(p) ? p() : p;\n  }, v => {\n    if (!(key in props)) {\n      def(v);\n      setValue(v, false);\n      return;\n    }\n\n    const p = props[key];\n\n    if (isValue(p)) {\n      p(v);\n      setValue(v, true);\n      return;\n    }\n\n    setValue(v, false);\n  });\n}\n\nfunction valueify(props, key, def, set) {\n  if (arguments.length >= 2) {\n    return createValue$1(props, key, def, set);\n  }\n\n  return (k, d, s) => createValue$1(props, k, d, s);\n}\n\nfunction createValue$2(props, key) {\n  return computed(() => {\n    const p = props[key];\n    return isValue(p) ? p() : p;\n  }, v => {\n    const p = props[key];\n\n    if (isValue(p)) {\n      p(v);\n    } else {\n      props[key] = v;\n    }\n  });\n}\n\nfunction asValue(props, key) {\n  if (arguments.length >= 2) {\n    return createValue$2(props, key);\n  }\n\n  return k => createValue$2(props, k);\n}\n\nexport { asValue, computed, encase, encashable, equal, exec, getIndexes, getMapValue, isValue, markChange, markRead, merge, mix, monitor, observe, observeRun, postpone, printError, recover, safeify, setPrintError, value, valueify, watchProp };\n//# sourceMappingURL=monitorable.esm.js.map\n","/*!\n * Neep v0.1.0-alpha.13\n * (c) 2019-2020 Fierflame\n * @license MIT\n */\nimport { markRead, markChange, safeify, isValue, computed, value, exec as exec$1, encase, monitor } from 'monitorable';\nexport { asValue, computed, encase, isValue, recover, value, valueify } from 'monitorable';\n\nconst version = '0.1.0-alpha.13';\nconst isProduction = process.env.NODE_ENV === 'production';\n\nconst devtools = {\n  renderHook() {}\n\n};\nfunction installDevtools(tools) {\n  if (!tools) {\n    return;\n  }\n\n  if (typeof tools !== 'object') {\n    return;\n  }\n\n  const {\n    renderHook\n  } = tools;\n\n  if (typeof renderHook === 'function') {\n    devtools.renderHook = renderHook;\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass NeepError extends Error {\n  constructor(message, tag = '') {\n    super(tag ? `[${tag}] ${message}` : message);\n\n    _defineProperty(this, \"tag\", void 0);\n\n    this.tag = tag;\n  }\n\n}\nfunction assert(v, message, tag) {\n  if (v) {\n    return;\n  }\n\n  throw new NeepError(message, tag);\n}\n\nlet nextFrameApi;\nfunction nextFrame(fn) {\n  assert(nextFrameApi, 'The basic renderer is not installed', 'install');\n\n  if (nextFrameApi) {\n    nextFrameApi(fn);\n  }\n}\nconst renders = Object.create(null);\nfunction getRender(type = '') {\n  if (typeof type === 'object') {\n    return type;\n  }\n\n  return renders[type] || renders.default;\n}\nfunction installRender(render) {\n  if (!render) {\n    return;\n  }\n\n  renders[render.type] = render;\n\n  if (nextFrameApi) {\n    return;\n  }\n\n  if (!renders.default) {\n    renders.default = render;\n  }\n\n  if (!nextFrameApi && render.nextFrame) {\n    renders.default = render;\n    nextFrameApi = render.nextFrame;\n  }\n}\n\nfunction installMonitorable(api) {}\n\nfunction install(apis) {\n  installMonitorable(apis.monitorable);\n  installRender(apis.render);\n\n  if (!isProduction) {\n    installDevtools(apis.devtools);\n  }\n}\n\nfunction getEventName(k) {\n  if (k[0] === '@') {\n    return k.substr(1);\n  }\n\n  if (/^on[:-]/.test(k)) {\n    return k.substr(3);\n  }\n\n  if (/^n([:-])on(\\1|:)/.test(k)) {\n    return k.substr(5);\n  }\n\n  return '';\n}\n\nfunction addEventFromCollection(addEvent, events) {\n  if (!events) {\n    return;\n  }\n\n  if (typeof events === 'function') {\n    const {\n      names\n    } = events;\n\n    if (!Array.isArray(names)) {\n      return;\n    }\n\n    for (const n of names) {\n      if (!n) {\n        continue;\n      }\n\n      addEvent(n, (...p) => events(n, ...p));\n    }\n\n    return;\n  }\n\n  if (typeof events !== 'object') {\n    return;\n  }\n\n  for (const k of Object.keys(events)) {\n    const f = events[k];\n\n    if (typeof f !== 'function') {\n      continue;\n    }\n\n    addEvent(k, f);\n  }\n}\n\nclass EventEmitter {\n  static update(emitter, events) {\n    if (!events) {\n      return [];\n    }\n\n    const newHandles = [];\n\n    if (events && typeof events === 'object') {\n      for (const n of Object.keys(events)) {\n        if (!n) {\n          continue;\n        }\n\n        const fn = events[n];\n\n        if (typeof fn !== 'function') {\n          continue;\n        }\n\n        newHandles.push(emitter.on(n, fn));\n      }\n    }\n\n    return newHandles;\n  }\n\n  static updateInProps(emitter, props, custom) {\n    if (!props) {\n      return [];\n    }\n\n    const newHandles = [];\n\n    function addEvent(entName, listener) {\n      newHandles.push(emitter.on(entName, listener));\n    }\n\n    for (const k of Object.keys(props)) {\n      const fn = props[k];\n\n      if (typeof fn !== 'function') {\n        continue;\n      }\n\n      const entName = getEventName(k);\n\n      if (!entName) {\n        continue;\n      }\n\n      addEvent(entName, fn);\n    }\n\n    addEventFromCollection(addEvent, props['@']);\n    addEventFromCollection(addEvent, props['n:on']);\n    addEventFromCollection(addEvent, props['n-on']);\n\n    if (typeof custom === 'function') {\n      custom(addEvent);\n    }\n\n    newHandles.push(...EventEmitter.update(emitter, props['@']));\n    return newHandles;\n  }\n\n  get names() {\n    return [...this._names];\n  }\n\n  constructor() {\n    _defineProperty(this, \"_names\", new Set());\n\n    _defineProperty(this, \"_cancelHandles\", new Set());\n\n    _defineProperty(this, \"emit\", void 0);\n\n    _defineProperty(this, \"on\", void 0);\n\n    const events = Object.create(null);\n    const names = this._names;\n\n    function createEmit(...omitNames) {\n      function emit(name, ...p) {\n        const event = events[name];\n\n        if (!event) {\n          return true;\n        }\n\n        let res = true;\n\n        for (const fn of [...event]) {\n          res = fn(...p) && res;\n        }\n\n        return res;\n      }\n\n      emit.omit = (...names) => createEmit(...omitNames, ...names);\n\n      Reflect.defineProperty(emit, 'names', {\n        get: () => {\n          markRead(createEmit, 'names');\n          return [...names].filter(t => !omitNames.includes(t));\n        },\n        configurable: true\n      });\n      return emit;\n    }\n\n    const on = (name, listener) => {\n      var _event;\n\n      function fn(...p) {\n        try {\n          return listener(...p) !== false;\n        } catch (e) {\n          console.error(e);\n          return false;\n        }\n      }\n\n      let event = events[name];\n\n      if (!((_event = event) === null || _event === void 0 ? void 0 : _event.size)) {\n        event = new Set();\n        events[name] = event;\n        markChange(createEmit, 'names');\n        names.add(name);\n      }\n\n      event.add(fn);\n      let removed = false;\n      return () => {\n        if (removed) {\n          return;\n        }\n\n        removed = true;\n        event.delete(fn);\n\n        if (event.size) {\n          return;\n        }\n\n        markChange(createEmit, 'names');\n        names.delete(name);\n      };\n    };\n\n    this.emit = createEmit();\n    this.on = on;\n  }\n\n  updateHandles(newHandles) {\n    const eventCancelHandles = this._cancelHandles;\n    const oldHandles = [...eventCancelHandles];\n    eventCancelHandles.clear();\n\n    for (const fn of oldHandles) {\n      fn();\n    }\n\n    newHandles.forEach(f => eventCancelHandles.add(f));\n    return newHandles;\n  }\n\n  update(list) {\n    const handles = EventEmitter.update(this, list);\n    return this.updateHandles(handles);\n  }\n\n  updateInProps(list, custom) {\n    const handles = EventEmitter.updateInProps(this, list, custom);\n    return this.updateHandles(handles);\n  }\n\n}\n\nconst ScopeSlot = 'Neep:ScopeSlot';\nconst SlotRender = 'Neep:SlotRender';\nconst Slot = 'Neep:Slot';\nconst Value = 'Neep:Value';\nconst Container = 'Neep:Container';\nconst Deliver = 'Neep:Deliver';\nconst Template = 'template';\nconst Fragment = Template;\n\nlet current;\nfunction setCurrent(fn, entity) {\n  const oldEntity = current;\n  current = entity;\n\n  try {\n    current.$_valueIndex = 0;\n    current.$_serviceIndex = 0;\n    const ret = fn();\n\n    if (current.$_valueIndex !== current.$_values.length) {\n      throw new NeepError('Inconsistent number of useValue executions', 'life');\n    }\n\n    if (current.$_serviceIndex && current.$_serviceIndex !== current.$_services.length) {\n      throw new NeepError('Inconsistent number of useService executions', 'life');\n    }\n\n    return ret;\n  } finally {\n    current = oldEntity;\n  }\n}\nfunction checkCurrent(name, initOnly = false) {\n  if (!current) {\n    throw new NeepError(`Function \\`${name}\\` can only be called within a cycle.`, 'life');\n  }\n\n  if (!initOnly) {\n    return current;\n  }\n\n  if (!current.created) {\n    return current;\n  }\n\n  throw new NeepError(`Function \\`${name}\\` can only be called at initialization time.`, 'life');\n}\n\nconst constructors = [];\nfunction initContext(context, entity) {\n  for (const constructor of constructors) {\n    constructor(context, entity);\n  }\n\n  return context;\n}\nfunction addContextConstructor(constructor) {\n  constructors.push(safeify(constructor));\n}\n\nconst constructors$1 = [];\nfunction initEntity(entity) {\n  for (const constructor of constructors$1) {\n    constructor(entity);\n  }\n\n  return entity;\n}\nfunction addEntityConstructor(constructor) {\n  constructors$1.push(safeify(constructor));\n}\n\nlet delayedRefresh = 0;\nconst objectSet = new Set();\nfunction wait(obj) {\n  if (delayedRefresh <= 0) {\n    return false;\n  }\n\n  objectSet.add(obj);\n  return true;\n}\n\nfunction run() {\n  if (delayedRefresh > 0) {\n    return;\n  }\n\n  const list = [...objectSet];\n  objectSet.clear();\n  list.forEach(o => o.refresh());\n}\n\nasync function asyncRefresh(f) {\n  try {\n    delayedRefresh++;\n    return await f();\n  } finally {\n    delayedRefresh--;\n    run();\n  }\n}\n\nfunction refresh(f, async) {\n  if (async) {\n    return asyncRefresh(f);\n  }\n\n  try {\n    delayedRefresh++;\n    return f();\n  } finally {\n    delayedRefresh--;\n    run();\n  }\n}\n\nconst hooks = Object.create(null);\nfunction setHook(id, hook, entity) {\n  let list = (entity === null || entity === void 0 ? void 0 : entity.$_hooks) || hooks;\n\n  if (!list) {\n    return () => {};\n  }\n\n  hook = safeify(hook);\n  let set = list[id];\n\n  if (!set) {\n    set = new Set();\n    list[id] = set;\n  }\n\n  set.add(hook);\n  return () => set.delete(hook);\n}\nfunction callHook(id, exposed) {\n  if (!exposed) {\n    return;\n  }\n\n  for (const hook of exposed.$_hooks[id] || []) {\n    hook(exposed);\n  }\n\n  for (const hook of hooks[id] || []) {\n    hook(exposed);\n  }\n}\n\nfunction watch(value, cb) {\n  const entity = checkCurrent('watch');\n\n  if (typeof value !== 'function') {\n    return () => {};\n  }\n\n  const stop = isValue(value) ? value.watch(cb) : computed(value).watch((v, s) => cb(v(), s));\n  setHook('beforeDestroy', () => stop(), entity);\n  return stop;\n}\nfunction useValue(fn) {\n  const entity = checkCurrent('useValue');\n  const index = entity.$_valueIndex++;\n  const values = entity.$_values;\n\n  if (!entity.created) {\n    values[index] = undefined;\n    const v = typeof fn === 'function' ? fn() : value(undefined);\n    return values[index] = v;\n  }\n\n  if (index >= values.length) {\n    throw new NeepError('Inconsistent number of useValue executions', 'life');\n  }\n\n  return values[index];\n}\nfunction useService(fn, ...p) {\n  const entity = checkCurrent('useService');\n  const index = entity.$_serviceIndex++;\n  const services = entity.$_services;\n\n  if (!entity.created) {\n    services[index] = undefined;\n    const v = fn(entity, ...p);\n    services[index] = v;\n    return v;\n  }\n\n  if (index >= services.length) {\n    throw new NeepError('Inconsistent number of useService executions', 'life');\n  }\n\n  return services[index];\n}\nfunction byService(fn, ...p) {\n  const entity = checkCurrent('byService');\n  return fn(entity, ...p);\n}\nfunction hook(name, hook, initOnly) {\n  const entity = checkCurrent('setHook');\n\n  if (initOnly && entity.created) {\n    return undefined;\n  }\n\n  return setHook(name, () => hook(), entity);\n}\n\nfunction setValue(obj, name, value, opt) {\n  if (typeof name === 'string' && ['$', '_'].includes(name[0])) {\n    return;\n  }\n\n  if (isValue(value) && opt) {\n    Reflect.defineProperty(obj, name, {\n      get() {\n        return value();\n      },\n\n      set(v) {\n        value(v);\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n    return;\n  }\n\n  if (typeof value === 'function' && opt) {\n    Reflect.defineProperty(obj, name, {\n      get: value,\n      set: typeof opt === 'function' ? opt : undefined,\n      configurable: true,\n      enumerable: true\n    });\n    return;\n  }\n\n  Reflect.defineProperty(obj, name, {\n    get() {\n      return value;\n    },\n\n    configurable: true,\n    enumerable: true\n  });\n}\n\nfunction expose(name, value, opt) {\n  setValue(checkCurrent('expose', true).exposed, name, value, opt);\n}\nfunction deliver(name, value, opt) {\n  setValue(checkCurrent('deliver', true).delivered, name, value, opt);\n}\n\nconst isElementSymbol = Symbol.for('isNeepElement');\nconst typeSymbol = Symbol.for('type');\nconst nameSymbol = Symbol.for('name');\nconst renderSymbol = Symbol.for('render');\nconst componentsSymbol = Symbol.for('components');\nconst configSymbol = Symbol.for('config');\n\nfunction isElement(v) {\n  if (!v) {\n    return false;\n  }\n\n  if (typeof v !== 'object') {\n    return false;\n  }\n\n  return v[isElementSymbol] === true;\n}\nfunction createElement(tag, attrs, ...children) {\n  attrs = attrs ? { ...attrs\n  } : {};\n  const node = {\n    [isElementSymbol]: true,\n    tag,\n    key: undefined,\n    children: []\n  };\n\n  if ('n:key' in attrs) {\n    node.key = attrs.key;\n  } else if ('n-key' in attrs) {\n    node.key = attrs.key;\n  }\n\n  if ('slot' in attrs) {\n    node.slot = attrs.slot;\n  }\n\n  if (typeof attrs.ref === 'function') {\n    node.ref = attrs.ref;\n  }\n\n  if (tag === Value) {\n    node.value = attrs.value;\n    return node;\n  }\n\n  node.children = children;\n\n  if (tag === Template) {\n    return node;\n  }\n\n  if (tag === SlotRender) {\n    node.render = attrs.render;\n    return node;\n  }\n\n  if (tag === ScopeSlot || tag === Slot) {\n    const {\n      render,\n      argv,\n      args,\n      name\n    } = attrs;\n    node.render = render;\n    node.args = argv && [argv] || Array.isArray(args) && args.length && args || [{}];\n\n    if (tag === ScopeSlot) {\n      node.props = {\n        name\n      };\n      return node;\n    }\n  }\n\n  node.props = {};\n\n  for (let k in attrs) {\n    node.props[k] = attrs[k];\n  }\n\n  return node;\n}\nfunction elements(node, opt = {}) {\n  if (Array.isArray(node)) {\n    const list = [];\n\n    for (let n of node) {\n      list.push(elements(n, opt));\n    }\n\n    return [].concat(...list);\n  }\n\n  if (!isElement(node)) {\n    return [node];\n  }\n\n  let {\n    tag\n  } = node;\n\n  if (!tag) {\n    return [node];\n  }\n\n  if ([Template, ScopeSlot].includes(tag)) {\n    return elements(node.children, opt);\n  }\n\n  if (typeof tag !== 'function') {\n    return [node];\n  }\n\n  if (tag[typeSymbol] !== 'simple') {\n    return [node];\n  }\n\n  const {\n    simple = true\n  } = opt;\n\n  if (!simple) {\n    return [node];\n  }\n\n  if (Array.isArray(simple)) {\n    if (simple.includes(tag)) {\n      return [node];\n    }\n  } else if (typeof simple === 'function') {\n    if (!simple(tag)) {\n      return [node];\n    }\n  }\n\n  return elements(node.children, opt);\n}\n\nlet label;\nfunction setLabel(l) {\n  label = l;\n}\nfunction getLabel() {\n  const l = label;\n  label = undefined;\n  return l;\n}\n\nfunction label$1(text, color = '') {\n  if (!isProduction) {\n    if (!current) {\n      setLabel([text, color]);\n      return;\n    }\n\n    Reflect.defineProperty(current.exposed, '$label', {\n      value: [text, color],\n      configurable: true\n    });\n  }\n}\n\nfunction getRect(n) {\n  for (const t of Object.keys(renders)) {\n    const render = renders[t];\n\n    if (!render) {\n      continue;\n    }\n\n    if (!render.isNode(n)) {\n      continue;\n    }\n\n    const rect = render.getRect(n);\n\n    if (rect) {\n      return rect;\n    }\n  }\n\n  return null;\n}\n\nlet ids = 0;\nconst Nodes = {};\nlet IdMap;\n\nif (!isProduction) {\n  IdMap = new Map();\n}\n\nfunction createMountedNode(n, id) {\n  if (!isProduction) {\n    id = id || ++ids;\n    const {\n      node\n    } = n;\n\n    if (node && IdMap) {\n      IdMap.set(node, id);\n    }\n\n    return Nodes[id] = { ...n,\n      id\n    };\n  }\n\n  return { ...n,\n    id: 0\n  };\n}\nfunction recoveryMountedNode(node) {\n  if (!isProduction) {\n    delete Nodes[node.id];\n  }\n}\n\nfunction* recursive2iterable(list) {\n  if (!Array.isArray(list)) {\n    yield list;\n    return;\n  }\n\n  for (const it of list) {\n    yield* recursive2iterable(it);\n  }\n}\n\nlet refList;\nfunction setRefList(list) {\n  refList = list;\n}\nfunction setRef(ref, node, isRemove) {\n  if (typeof ref !== 'function') {\n    return;\n  }\n\n  if (!node) {\n    return;\n  }\n\n  if (!refList) {\n    ref(node, isRemove);\n  } else {\n    refList.push(() => ref(node, isRemove));\n  }\n}\nfunction* getNodes(tree) {\n  if (Array.isArray(tree)) {\n    for (const it of tree) {\n      yield* getNodes(it);\n    }\n\n    return;\n  }\n\n  const {\n    children,\n    node,\n    component\n  } = tree;\n\n  if (node) {\n    yield node;\n    return;\n  }\n\n  if (component) {\n    yield* getNodes(component.tree);\n    return;\n  }\n\n  yield* getNodes(children);\n}\nfunction unmount(iRender, tree) {\n  if (Array.isArray(tree)) {\n    tree.forEach(e => unmount(iRender, e));\n    return;\n  }\n\n  const {\n    component,\n    children,\n    node,\n    ref\n  } = tree;\n  recoveryMountedNode(tree);\n\n  if (component) {\n    setRef(ref, component.exposed, true);\n    component.unmount();\n    return;\n  }\n\n  if (node) {\n    setRef(ref, node, true);\n    iRender.removeNode(node);\n  }\n\n  unmount(iRender, children);\n}\n\nfunction createValue(iRender, source, value) {\n  let {\n    ref\n  } = source;\n\n  if (iRender.isNode(value)) {\n    setRef(ref, value);\n    return createMountedNode({ ...source,\n      value,\n      node: value,\n      children: [],\n      component: undefined\n    });\n  }\n\n  const type = typeof value;\n  let node;\n\n  if (type === 'bigint' || type === 'boolean' || type === 'number' || type === 'string' || type === 'symbol' || value instanceof RegExp) {\n    node = iRender.createText(String(value));\n  } else if (value instanceof Date) {\n    node = iRender.createText(value.toISOString());\n  } else if (type === 'object' && value) {\n    node = iRender.createText(String(value));\n  }\n\n  if (!node) {\n    node = iRender.createPlaceholder();\n  }\n\n  setRef(ref, node);\n  return createMountedNode({ ...source,\n    value,\n    node,\n    component: undefined,\n    children: []\n  });\n}\nfunction createAll(iRender, source) {\n  if (!source.length) {\n    return [createMountedNode({\n      tag: null,\n      node: iRender.createPlaceholder(),\n      component: undefined,\n      children: []\n    })];\n  }\n\n  return source.map(item => Array.isArray(item) ? createList(iRender, item) : createItem(iRender, item));\n}\nfunction createList(iRender, source) {\n  if (source.length) {\n    return source.map(it => createItem(iRender, it));\n  }\n\n  return [createMountedNode({\n    tag: null,\n    node: iRender.createPlaceholder(),\n    component: undefined,\n    children: []\n  })];\n}\nfunction createItem(iRender, source) {\n  var _source$children;\n\n  const {\n    tag,\n    ref,\n    component\n  } = source;\n\n  if (!tag) {\n    const node = iRender.createPlaceholder();\n    setRef(ref, node);\n    return createMountedNode({\n      tag: null,\n      node,\n      component: undefined,\n      children: []\n    });\n  }\n\n  const ltag = typeof tag !== 'string' ? '' : tag.toLowerCase();\n\n  if (typeof tag !== 'string' || ltag === 'neep:container') {\n    if (!component) {\n      return createMountedNode({ ...source,\n        node: undefined,\n        component: undefined,\n        children: createAll(iRender, source.children)\n      });\n    }\n\n    component.mount();\n    setRef(ref, component.exposed);\n    return createMountedNode({ ...source,\n      node: undefined,\n      component,\n      children: []\n    });\n  }\n\n  if (ltag === 'neep:value') {\n    let {\n      value\n    } = source;\n\n    if (isValue(value)) {\n      value = value();\n    }\n\n    return createValue(iRender, source, value);\n  }\n\n  if (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n    return createMountedNode({ ...source,\n      node: undefined,\n      component: undefined,\n      children: createAll(iRender, source.children)\n    });\n  }\n\n  const node = iRender.createElement(tag, source.props || {});\n  setRef(ref, node);\n  let children = [];\n\n  if ((_source$children = source.children) === null || _source$children === void 0 ? void 0 : _source$children.length) {\n    children = createAll(iRender, source.children);\n\n    for (const it of getNodes(children)) {\n      iRender.insertNode(node, it);\n    }\n  }\n\n  return createMountedNode({ ...source,\n    node,\n    component: undefined,\n    children\n  });\n}\n\nfunction getLastNode(tree) {\n  if (Array.isArray(tree)) {\n    return getLastNode(tree[tree.length - 1]);\n  }\n\n  const {\n    component,\n    children,\n    node\n  } = tree;\n\n  if (node) {\n    return node;\n  }\n\n  if (component) {\n    return getLastNode(component.tree);\n  }\n\n  return getLastNode(children);\n}\n\nfunction getFirstNode(tree) {\n  if (Array.isArray(tree)) {\n    return getFirstNode(tree[0]);\n  }\n\n  const {\n    component,\n    children,\n    node\n  } = tree;\n\n  if (node) {\n    return node;\n  }\n\n  if (component) {\n    return getFirstNode(component.tree);\n  }\n\n  return getFirstNode(children[0]);\n}\n\nfunction replace(iRender, newTree, oldTree) {\n  const next = getFirstNode(oldTree);\n\n  if (!next) {\n    return newTree;\n  }\n\n  const parent = iRender.getParent(next);\n\n  if (!parent) {\n    return newTree;\n  }\n\n  for (const it of getNodes(newTree)) {\n    iRender.insertNode(parent, it, next);\n  }\n\n  unmount(iRender, oldTree);\n  return newTree;\n}\n\nfunction updateList(iRender, source, tree) {\n  if (!source.length) {\n    const node = createItem(iRender, {\n      tag: null,\n      children: []\n    });\n    return [replace(iRender, node, tree)];\n  }\n\n  if (!Array.isArray(tree)) {\n    tree = [tree];\n  }\n\n  const newList = [];\n  const list = [...tree];\n  const mountedMap = new Map();\n\n  for (const src of source) {\n    const index = list.findIndex(it => it.tag === src.tag && it.key === src.key);\n\n    if (index >= 0) {\n      const old = list[index];\n      const item = updateItem(iRender, src, old);\n      mountedMap.set(old, item);\n      newList.push(item);\n      list.splice(index, 1);\n    } else {\n      const item = createItem(iRender, src);\n      newList.push(item);\n    }\n  }\n\n  if (!mountedMap.size) {\n    return replace(iRender, newList, list);\n  }\n\n  unmount(iRender, list);\n  tree = tree.filter(t => mountedMap.has(t));\n  const last = getLastNode(tree[tree.length - 1]);\n  const parent = iRender.getParent(last);\n\n  if (!parent) {\n    return newList;\n  }\n\n  let next = iRender.nextNode(last);\n\n  for (let i = newList.length - 1; i >= 0; i--) {\n    const item = newList[i];\n    const index = tree.findIndex(o => mountedMap.get(o) === item);\n\n    if (index >= 0) {\n      for (const it of tree.splice(index)) {\n        mountedMap.delete(it);\n      }\n    } else {\n      for (const it of getNodes(item)) {\n        iRender.insertNode(parent, it, next);\n      }\n    }\n\n    next = getFirstNode(item) || next;\n  }\n\n  return newList;\n}\n\nfunction updateAll(iRender, source, tree) {\n  let index = 0;\n  let length = Math.min(source.length, source.length || 1);\n  const list = [];\n\n  for (; index < length; index++) {\n    const src = source[index];\n\n    if (Array.isArray(src)) {\n      list.push(updateList(iRender, src, tree[index]));\n    } else {\n      list.push(updateItem(iRender, src, tree[index]));\n    }\n  }\n\n  length = Math.max(source.length, tree.length);\n\n  if (tree.length > length) {\n    for (; index < length; index++) {\n      unmount(iRender, tree[index]);\n    }\n  }\n\n  if (source.length > length) {\n    const last = getLastNode(list[list.length - 1]);\n    const parent = iRender.getParent(last);\n    const next = iRender.nextNode(last);\n\n    for (; index < length; index++) {\n      const src = source[index];\n      const item = Array.isArray(src) ? createList(iRender, src) : createItem(iRender, src);\n      list.push(item);\n\n      if (!parent) {\n        continue;\n      }\n\n      for (const it of getNodes(item)) {\n        iRender.insertNode(parent, it, next);\n      }\n    }\n  }\n\n  return list;\n}\n\nfunction updateItem(iRender, source, tree) {\n  if (Array.isArray(tree)) {\n    const index = tree.findIndex(it => it.tag === source.tag && it.component === source.component);\n\n    if (index < 0) {\n      return replace(iRender, createItem(iRender, source), tree);\n    }\n\n    const all = tree;\n    [tree] = tree.splice(index, 1);\n    unmount(iRender, all);\n  }\n\n  const {\n    tag,\n    component\n  } = source;\n  const ref = source.ref !== tree.ref && source.ref || undefined;\n\n  if (tag !== tree.tag || component !== tree.component) {\n    return replace(iRender, createItem(iRender, source), tree);\n  }\n\n  if (!tag) {\n    return tree;\n  }\n\n  const ltag = typeof tag !== 'string' ? '' : tag.toLowerCase();\n\n  if (typeof tag !== 'string' || ltag === 'neep:container') {\n    if (!component) {\n      return createMountedNode({ ...source,\n        node: undefined,\n        component: undefined,\n        children: updateAll(iRender, source.children, tree.children)\n      }, tree.id);\n    }\n\n    setRef(ref, component.exposed);\n    return createMountedNode({ ...source,\n      node: undefined,\n      component,\n      children: []\n    }, tree.id);\n  }\n\n  if (ltag === 'neep:value') {\n    let {\n      value\n    } = source;\n\n    if (isValue(value)) {\n      value = value();\n    }\n\n    if (tree.value === value) {\n      setRef(ref, tree.node);\n      return createMountedNode({ ...tree,\n        ...source,\n        value,\n        children: []\n      }, tree.id);\n    }\n\n    return replace(iRender, createValue(iRender, source, value), tree);\n  }\n\n  if (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n    return createMountedNode({ ...source,\n      node: undefined,\n      component: undefined,\n      children: updateAll(iRender, source.children, tree.children)\n    }, tree.id);\n  }\n\n  const {\n    node\n  } = tree;\n  iRender.updateProps(node, source.props || {});\n  setRef(ref, node);\n\n  if (!source.children.length && !tree.children.length) {\n    return createMountedNode({ ...tree,\n      ...source,\n      children: []\n    }, tree.id);\n  }\n\n  if (!source.children.length && tree.children.length) {\n    unmount(iRender, tree.children);\n  }\n\n  if (source.children.length && !tree.children.length) {\n    const children = createAll(iRender, source.children);\n\n    for (const it of getNodes(children)) {\n      iRender.insertNode(node, it);\n    }\n\n    return createMountedNode({ ...tree,\n      ...source,\n      children\n    }, tree.id);\n  }\n\n  return createMountedNode({ ...tree,\n    ...source,\n    children: updateAll(iRender, source.children, tree.children)\n  }, tree.id);\n}\n\nfunction draw(iRender, source, tree) {\n  if (tree) {\n    return updateAll(iRender, source, tree);\n  }\n\n  return createAll(iRender, source);\n}\n\nfunction getSlots(iRender, children, slots, native = false) {\n  const nativeList = [];\n\n  for (const it of children) {\n    if (Array.isArray(it)) {\n      const list = Object.create(null);\n      nativeList.push(getSlots(iRender, it, list, native));\n\n      for (const k of Reflect.ownKeys(list)) {\n        if (k in slots) {\n          slots[k].push(list[k]);\n        } else {\n          slots[k] = [list[k]];\n        }\n      }\n\n      continue;\n    }\n\n    if (native) {\n      if (iRender.isNode(it)) {\n        nativeList.push(it);\n        continue;\n      }\n\n      if (!isElement(it)) {\n        nativeList.push(it);\n        continue;\n      }\n\n      if (it.tag !== SlotRender) {\n        nativeList.push(it);\n        continue;\n      }\n    }\n\n    const slot = isElement(it) && it.slot || 'default';\n    const el = isElement(it) ? { ...it,\n      slot: undefined,\n      props: { ...it.props,\n        slot: undefined\n      }\n    } : it;\n\n    if (slot in slots) {\n      slots[slot].push(el);\n    } else {\n      slots[slot] = [el];\n    }\n  }\n\n  return nativeList;\n}\n\nfunction renderSlots(list, ...props) {\n  return list.map(it => {\n    if (Array.isArray(it)) {\n      return renderSlots(it, ...props);\n    }\n\n    if (!isElement(it)) {\n      return it;\n    }\n\n    if (it.tag !== SlotRender) {\n      return { ...it,\n        slot: undefined\n      };\n    }\n\n    if (typeof it.render === 'function') {\n      return it.render(...props);\n    }\n\n    return it.children;\n  });\n}\n\nfunction createSlots(name, list) {\n  const slot = (...props) => ({\n    [isElementSymbol]: true,\n    tag: ScopeSlot,\n    children: renderSlots(list, ...props),\n    inserted: true,\n    label: isProduction ? undefined : [`[${name}]`, '#00F']\n  });\n\n  slot.children = list;\n  return slot;\n}\n\nfunction setSlots(children, slots = Object.create(null)) {\n  for (const k of Reflect.ownKeys(slots)) {\n    if (!(k in children)) {\n      delete slots[k];\n    }\n  }\n\n  for (const k of Reflect.ownKeys(children)) {\n    slots[k] = createSlots(k, children[k]);\n  }\n\n  return slots;\n}\n\nconst disabledKey = new Set([':', '@', '#', '*', '!', '%', '^', '~', '&', '=', '+', '.', '(', ')', '[', ']', '{', '}', '<', '>']);\n\nfunction filter(k) {\n  if (typeof k !== 'string') {\n    return true;\n  }\n\n  if (disabledKey.has(k[0])) {\n    return false;\n  }\n\n  if (/^n[:-]/.test(k)) {\n    return false;\n  }\n\n  if (/^on[:-]/.test(k)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction updateProps(obj, props, oldProps = {}, define = false, isProps = false) {\n  const keys = Reflect.ownKeys(props);\n  const newKeys = new Set(isProps ? keys.filter(filter) : keys);\n\n  for (const k of Reflect.ownKeys(obj)) {\n    if (!newKeys.has(k)) {\n      delete obj[k];\n    }\n  }\n\n  if (!define) {\n    for (const k of newKeys) {\n      obj[k] = props[k];\n    }\n\n    return obj;\n  }\n\n  for (const k of newKeys) {\n    const value = props[k];\n\n    if (k in oldProps && oldProps[k] === value) {\n      continue;\n    }\n\n    if (isValue(value)) {\n      Reflect.defineProperty(obj, k, {\n        configurable: true,\n        enumerable: true,\n\n        get() {\n          return value();\n        },\n\n        set(v) {\n          value(v);\n        }\n\n      });\n      continue;\n    }\n\n    Reflect.defineProperty(obj, k, {\n      configurable: true,\n      enumerable: true,\n      value\n    });\n  }\n\n  return obj;\n}\n\nconst components = Object.create(null);\nfunction register(name, component) {\n  components[name] = component;\n}\n\nfunction getComponents(...components) {\n  return components.filter(Boolean);\n}\n\nfunction execSimple(nObject, delivered, node, tag, components, children) {\n  if (node.execed) {\n    return node;\n  }\n\n  const {\n    iRender\n  } = nObject;\n  const slotMap = Object.create(null);\n  getSlots(iRender, children, slotMap);\n  const slots = setSlots(slotMap);\n  const event = new EventEmitter();\n  event.updateInProps(node.props);\n  const props = { ...node.props\n  };\n  const context = initContext({\n    slots,\n    created: false,\n    parent: nObject.exposed,\n    delivered,\n    children: new Set(),\n    childNodes: children,\n\n    refresh(f) {\n      nObject.refresh(f);\n    },\n\n    emit: event.emit\n  });\n\n  if (!isProduction) {\n    getLabel();\n  }\n\n  const result = tag(props, context);\n  let label;\n\n  if (!isProduction) {\n    label = getLabel();\n  }\n\n  const nodes = init(nObject, delivered, renderNode(nObject.iRender, result, context, tag[renderSymbol]), slots, getComponents(...components, tag[componentsSymbol]), false);\n  return { ...node,\n    tag,\n    execed: true,\n    children: Array.isArray(nodes) ? nodes : [nodes],\n    label\n  };\n}\n\nfunction exec(nObject, delivered, node, components) {\n  if (Array.isArray(node)) {\n    return node.map(n => exec(nObject, delivered, n, components));\n  }\n\n  if (!isElement(node)) {\n    return node;\n  }\n\n  let {\n    tag,\n    children\n  } = node;\n\n  if (tag === Deliver) {\n    const props = { ...node.props\n    };\n    delete props.ref;\n    delete props.slot;\n    delete props.key;\n    return { ...node,\n      tag,\n      children: children.map(n => exec(nObject, updateProps(Object.create(delivered), props || {}, {}, true), n, components))\n    };\n  }\n\n  if (typeof tag !== 'function' || tag[typeSymbol] !== 'simple') {\n    return { ...node,\n      tag,\n      children: children.map(n => exec(nObject, delivered, n, components))\n    };\n  }\n\n  return execSimple(nObject, delivered, node, tag, components, children);\n}\n\nfunction findComponent(tag, components$1) {\n  if (!tag) {\n    return null;\n  }\n\n  if (typeof tag !== 'string') {\n    return tag;\n  }\n\n  if (tag === 'template') {\n    return tag;\n  }\n\n  if (/^neep:.+/i.test(tag)) {\n    return tag;\n  }\n\n  for (const list of components$1) {\n    const component = list[tag];\n\n    if (component) {\n      return component;\n    }\n  }\n\n  return components[tag] || tag;\n}\n\nfunction replaceNode(node, slots, components, native) {\n  var _node$props;\n\n  if (Array.isArray(node)) {\n    return node.map(n => replaceNode(n, slots, components, native));\n  }\n\n  if (!isElement(node)) {\n    return node;\n  }\n\n  let {\n    children,\n    args = [{}]\n  } = node;\n  let tag = findComponent(node.tag, components);\n\n  if (tag === Slot) {\n    tag = native ? 'slot' : ScopeSlot;\n  }\n\n  if (tag !== ScopeSlot) {\n    return { ...node,\n      tag,\n      children: replaceNode(children, slots, components, native)\n    };\n  }\n\n  if (node.tag === ScopeSlot && node.inserted) {\n    return node;\n  }\n\n  const slotName = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.name) || 'default';\n  const slot = slots[slotName];\n\n  if (typeof slot === 'function') {\n    return { ...node,\n      ...slot(...args)\n    };\n  }\n\n  const {\n    render\n  } = node;\n  const label = isProduction ? undefined : [`[${slotName}]`, '#00F'];\n  return { ...node,\n    tag: ScopeSlot,\n    label,\n    children: replaceNode(typeof render !== 'function' ? children : render(...args), slots, components, native)\n  };\n}\n\nfunction renderNode(iRender, node, context, render) {\n  if (Array.isArray(node)) {\n    return node;\n  }\n\n  if (isElement(node)) {\n    return [node];\n  }\n\n  if (node === undefined || node === null) {\n    return [{\n      [isElementSymbol]: true,\n      tag: null,\n      key: undefined,\n      children: []\n    }];\n  }\n\n  if (!iRender.isNode(node) && node && typeof node === 'object' && render) {\n    node = render(node, context);\n  }\n\n  if (isElement(node)) {\n    return [node];\n  }\n\n  if (node === undefined || node === null) {\n    return [{\n      [isElementSymbol]: true,\n      tag: null,\n      key: undefined,\n      children: []\n    }];\n  }\n\n  return [{\n    [isElementSymbol]: true,\n    key: undefined,\n    tag: Value,\n    value: node,\n    children: []\n  }];\n}\n\nfunction init(nObject, delivered, node, slots, components, native) {\n  return exec(nObject, delivered, replaceNode(node, slots, components, native), components);\n}\nfunction normalize(nObject, result) {\n  const {\n    component\n  } = nObject;\n  return init(nObject, nObject.delivered, renderNode(nObject.iRender, result, nObject.context, component[renderSymbol]), nObject.slots, getComponents(component[componentsSymbol]), Boolean(nObject.native));\n}\n\nfunction createExposed(obj) {\n  const cfg = {\n    $parent: {\n      configurable: true,\n      get: () => {\n        var _obj$parent;\n\n        return (_obj$parent = obj.parent) === null || _obj$parent === void 0 ? void 0 : _obj$parent.exposed;\n      }\n    },\n    $component: {\n      configurable: true,\n      value: null\n    },\n    $isContainer: {\n      configurable: true,\n      value: false\n    },\n    $created: {\n      configurable: true,\n      get: () => obj.created\n    },\n    $destroyed: {\n      configurable: true,\n      get: () => obj.destroyed\n    },\n    $mounted: {\n      configurable: true,\n      get: () => obj.mounted\n    },\n    $unmounted: {\n      configurable: true,\n      get: () => obj.unmounted\n    }\n  };\n  const exposed = Object.create(null, cfg);\n  return exposed;\n}\n\nlet completeList;\nfunction setCompleteList(list) {\n  completeList = list;\n}\nfunction complete(it) {\n  if (!completeList) {\n    it();\n  } else {\n    completeList.push(it);\n  }\n}\n\nfunction createEntity(obj) {\n  const cfg = {\n    exposed: {\n      configurable: true,\n      get: () => obj.exposed\n    },\n    delivered: {\n      configurable: true,\n      get: () => obj.delivered\n    },\n    parent: {\n      configurable: true,\n      get: () => {\n        var _obj$parent2;\n\n        return (_obj$parent2 = obj.parent) === null || _obj$parent2 === void 0 ? void 0 : _obj$parent2.entity;\n      }\n    },\n    component: {\n      configurable: true,\n      value: null\n    },\n    isContainer: {\n      configurable: true,\n      value: false\n    },\n    created: {\n      configurable: true,\n      get: () => obj.created\n    },\n    destroyed: {\n      configurable: true,\n      get: () => obj.destroyed\n    },\n    mounted: {\n      configurable: true,\n      get: () => obj.mounted\n    },\n    unmounted: {\n      configurable: true,\n      get: () => obj.unmounted\n    },\n    $_hooks: {\n      configurable: true,\n      value: Object.create(null)\n    },\n    $_valueIndex: {\n      configurable: true,\n      value: 0,\n      writable: true\n    },\n    $_values: {\n      configurable: true,\n      value: []\n    },\n    $_serviceIndex: {\n      configurable: true,\n      value: 0,\n      writable: true\n    },\n    $_services: {\n      configurable: true,\n      value: []\n    },\n    callHook: {\n      configurable: true,\n\n      value(h) {\n        callHook(h, entity);\n      }\n\n    },\n    setHook: {\n      configurable: true,\n\n      value(id, hook) {\n        return setHook(id, hook, entity);\n      }\n\n    },\n    refresh: {\n      configurable: true,\n      value: obj.refresh.bind(obj)\n    },\n    on: {\n      configurable: true,\n      value: obj.on\n    },\n    emit: {\n      configurable: true,\n      value: obj.emit\n    },\n    config: {\n      configurable: true,\n      value: obj.config\n    }\n  };\n  const entity = Object.create(null, cfg);\n  return initEntity(entity);\n}\n\nclass EntityObject {\n  constructor(iRender, parent, delivered = (parent === null || parent === void 0 ? void 0 : parent.delivered) || Object.create(null), container) {\n    _defineProperty(this, \"events\", new EventEmitter());\n\n    _defineProperty(this, \"emit\", this.events.emit);\n\n    _defineProperty(this, \"on\", this.events.on);\n\n    _defineProperty(this, \"eventCancelHandles\", new Set());\n\n    _defineProperty(this, \"iRender\", void 0);\n\n    _defineProperty(this, \"components\", Object.create(null));\n\n    _defineProperty(this, \"config\", Object.create(null));\n\n    _defineProperty(this, \"parentDelivered\", void 0);\n\n    _defineProperty(this, \"delivered\", void 0);\n\n    _defineProperty(this, \"exposed\", createExposed(this));\n\n    _defineProperty(this, \"entity\", createEntity(this));\n\n    _defineProperty(this, \"parent\", void 0);\n\n    _defineProperty(this, \"native\", void 0);\n\n    _defineProperty(this, \"created\", false);\n\n    _defineProperty(this, \"destroyed\", false);\n\n    _defineProperty(this, \"mounted\", false);\n\n    _defineProperty(this, \"unmounted\", false);\n\n    _defineProperty(this, \"children\", new Set());\n\n    _defineProperty(this, \"tree\", []);\n\n    _defineProperty(this, \"container\", void 0);\n\n    _defineProperty(this, \"_render\", () => []);\n\n    _defineProperty(this, \"_needRefresh\", false);\n\n    _defineProperty(this, \"_delayedRefresh\", 0);\n\n    _defineProperty(this, \"_refreshing\", false);\n\n    _defineProperty(this, \"_nodes\", []);\n\n    _defineProperty(this, \"childNodes\", []);\n\n    _defineProperty(this, \"__executed_destroy\", false);\n\n    _defineProperty(this, \"__executed_mount\", false);\n\n    _defineProperty(this, \"__executed_mounted\", false);\n\n    _defineProperty(this, \"_cancelDrawMonitor\", void 0);\n\n    this.iRender = iRender;\n    this.parentDelivered = delivered;\n    this.delivered = Object.create(delivered);\n\n    if (parent) {\n      this.parent = parent;\n    }\n\n    this.container = container || this;\n  }\n\n  get canRefresh() {\n    if (wait(this)) {\n      return false;\n    }\n\n    return !this._delayedRefresh;\n  }\n\n  get needRefresh() {\n    if (wait(this)) {\n      return false;\n    }\n\n    if (this._delayedRefresh) {\n      return false;\n    }\n\n    const needRefresh = this._needRefresh;\n    this._needRefresh = false;\n    return needRefresh;\n  }\n\n  requestDraw() {}\n\n  async asyncRefresh(f) {\n    try {\n      this._delayedRefresh++;\n      return await f();\n    } finally {\n      this._delayedRefresh--;\n      this.refresh();\n    }\n  }\n\n  refresh(f, async) {\n    if (typeof f === 'function') {\n      if (async) {\n        return this.asyncRefresh(f);\n      }\n\n      try {\n        this._delayedRefresh++;\n        return f();\n      } finally {\n        this._delayedRefresh--;\n\n        if (this._delayedRefresh <= 0) {\n          this.refresh();\n        }\n      }\n    }\n\n    if (this.destroyed) {\n      return;\n    }\n\n    this._needRefresh = true;\n\n    if (!this.created) {\n      return;\n    }\n\n    if (this._refreshing) {\n      return;\n    }\n\n    this._refreshing = true;\n    let nodes;\n\n    while (this.needRefresh) {\n      nodes = this._render();\n\n      if (this.destroyed) {\n        return;\n      }\n    }\n\n    this._refreshing = false;\n\n    if (!this.canRefresh) {\n      return;\n    }\n\n    if (!nodes) {\n      return;\n    }\n\n    this._nodes = convert(this, nodes, this._nodes);\n\n    if (!this.mounted) {\n      return;\n    }\n\n    if (this.destroyed) {\n      return;\n    }\n\n    if (this.unmounted) {\n      return;\n    }\n\n    this.requestDraw();\n  }\n\n  callHook(id) {\n    callHook(id, this.entity);\n  }\n\n  _update(props, children) {\n    this.childNodes = children;\n  }\n\n  update(props, children) {\n    this._update(props, children);\n  }\n\n  _destroy() {}\n\n  destroy() {\n    if (this.__executed_destroy) {\n      return;\n    }\n\n    this.__executed_destroy = true;\n    this.callHook('beforeDestroy');\n\n    this._destroy();\n\n    this.callHook('destroyed');\n    this.destroyed = true;\n  }\n\n  _mount() {}\n\n  mount() {\n    if (this.__executed_destroy) {\n      return;\n    }\n\n    if (this.__executed_mount) {\n      return;\n    }\n\n    this.__executed_mount = true;\n    this.callHook('beforeMount');\n    const result = exec$1(c => c && this.requestDraw(), () => {\n      this._mount();\n\n      this.mounted = true;\n    });\n    this._cancelDrawMonitor = result.stop;\n    complete(() => this.callHook('mounted'));\n  }\n\n  _unmount() {}\n\n  unmount() {\n    if (!this.mounted) {\n      return;\n    }\n\n    if (this.__executed_mounted) {\n      return;\n    }\n\n    this.__executed_mounted = true;\n    this.callHook('beforeUnmount');\n\n    this._unmount();\n\n    this.callHook('unmounted');\n    this.unmounted = true;\n  }\n\n  _draw() {}\n\n  draw() {\n    if (this.__executed_destroy) {\n      return;\n    }\n\n    if (this._cancelDrawMonitor) {\n      this._cancelDrawMonitor();\n    }\n\n    this.callHook('beforeDraw');\n    const result = exec$1(c => c && this.requestDraw(), () => this._draw());\n    this._cancelDrawMonitor = result.stop;\n    complete(() => this.callHook('drawn'));\n  }\n\n}\n\nfunction update(nObject, props, children) {\n  updateProps(nObject.props, props, {}, false, true);\n  nObject.events.updateInProps(props);\n  const slots = Object.create(null);\n  const {\n    native\n  } = nObject;\n  const childNodes = getSlots(nObject.iRender, children, slots, Boolean(native));\n  setSlots(slots, nObject.slots);\n\n  if (!native) {\n    return;\n  }\n\n  nObject.nativeNodes = convert(nObject, childNodes, nObject.nativeNodes);\n\n  if (!nObject.mounted) {\n    return;\n  }\n\n  nObject.requestDraw();\n}\n\nfunction createContext(nObject) {\n  return initContext({\n    slots: nObject.slots,\n\n    get created() {\n      return nObject.created;\n    },\n\n    get parent() {\n      return nObject.parent.exposed;\n    },\n\n    get delivered() {\n      return nObject.parentDelivered;\n    },\n\n    get children() {\n      return nObject.children;\n    },\n\n    get childNodes() {\n      return nObject.childNodes;\n    },\n\n    get emit() {\n      return nObject.emit;\n    },\n\n    refresh(f) {\n      nObject.refresh(f);\n    }\n\n  }, nObject.entity);\n}\n\nfunction initRender(nObject) {\n  const {\n    component,\n    props,\n    context,\n    entity\n  } = nObject;\n\n  function refresh(changed) {\n    if (!changed) {\n      return;\n    }\n\n    nObject.refresh();\n  }\n\n  const result = exec$1(refresh, () => setCurrent(() => component(props, context), entity), {\n    resultOnly: true\n  });\n\n  if (typeof result === 'function') {\n    const render = monitor(refresh, () => normalize(nObject, result()));\n    return {\n      nodes: render(),\n      render,\n      stopRender: () => render.stop()\n    };\n  }\n\n  const render = monitor(refresh, () => normalize(nObject, setCurrent(() => component(props, context), entity)));\n  return {\n    nodes: exec$1(refresh, () => normalize(nObject, result), {\n      resultOnly: true\n    }),\n    render,\n    stopRender: () => render.stop()\n  };\n}\n\nclass ComponentEntity extends EntityObject {\n  constructor(component, props, children, parent, delivered) {\n    var _this$iRender$createC, _this$iRender;\n\n    super(parent.iRender, parent, delivered, parent.container);\n\n    _defineProperty(this, \"component\", void 0);\n\n    _defineProperty(this, \"props\", encase(Object.create(null)));\n\n    _defineProperty(this, \"slots\", encase(Object.create(null)));\n\n    _defineProperty(this, \"_stopRender\", void 0);\n\n    _defineProperty(this, \"nativeNodes\", void 0);\n\n    _defineProperty(this, \"shadowTree\", []);\n\n    _defineProperty(this, \"nativeTree\", []);\n\n    _defineProperty(this, \"_shadow\", void 0);\n\n    _defineProperty(this, \"context\", void 0);\n\n    _defineProperty(this, \"parent\", void 0);\n\n    this.component = component;\n    Object.assign(this.config, component[configSymbol]);\n    Object.assign(this.components, component[componentsSymbol]);\n    Reflect.defineProperty(this.exposed, '$component', {\n      value: component,\n      enumerable: true,\n      configurable: true\n    });\n    [this.native, this._shadow] = component[typeSymbol] === 'native' && ((_this$iRender$createC = (_this$iRender = this.iRender).createComponent) === null || _this$iRender$createC === void 0 ? void 0 : _this$iRender$createC.call(_this$iRender)) || [];\n    this.parent = parent;\n    parent.children.add(this.exposed);\n    const context = createContext(this);\n    this.context = context;\n    this.callHook('beforeCreate');\n    this.childNodes = children;\n    refresh(() => update(this, props, children));\n    const {\n      render,\n      nodes,\n      stopRender\n    } = initRender(this);\n    this._render = render;\n    this._stopRender = stopRender;\n    this._nodes = convert(this, nodes);\n    this.callHook('created');\n    this.created = true;\n\n    if (this._needRefresh) {\n      this.refresh();\n    }\n  }\n\n  _update(props, children) {\n    if (this.destroyed) {\n      return;\n    }\n\n    this.childNodes = children;\n    refresh(() => update(this, props, children));\n  }\n\n  _destroy() {\n    if (this._stopRender) {\n      this._stopRender();\n    }\n\n    this.parent.children.delete(this.exposed);\n    destroy(this._nodes);\n  }\n\n  requestDraw() {\n    this.container.markDraw(this);\n  }\n\n  _draw() {\n    const {\n      nativeNodes,\n      iRender,\n      _shadow,\n      native\n    } = this;\n\n    if (!native || !nativeNodes || !_shadow) {\n      this.tree = draw(iRender, this._nodes, this.tree);\n      return;\n    }\n\n    this.shadowTree = draw(iRender, this._nodes, this.shadowTree);\n    this.nativeTree = draw(iRender, nativeNodes, this.nativeTree);\n  }\n\n  _mount() {\n    const {\n      nativeNodes,\n      iRender,\n      _shadow,\n      native,\n      _nodes\n    } = this;\n\n    if (!native || !nativeNodes || !_shadow) {\n      this.tree = draw(iRender, _nodes);\n      return;\n    }\n\n    this.tree = draw(iRender, convert(this, native));\n    this.shadowTree = draw(iRender, _nodes);\n\n    for (const it of getNodes(this.shadowTree)) {\n      iRender.insertNode(_shadow, it);\n    }\n\n    this.nativeTree = draw(iRender, nativeNodes);\n\n    for (const it of getNodes(this.nativeTree)) {\n      iRender.insertNode(native, it);\n    }\n  }\n\n  _unmount() {\n    const {\n      iRender,\n      nativeTree\n    } = this;\n    unmount(iRender, this.tree);\n\n    if (!nativeTree) {\n      return;\n    }\n\n    unmount(iRender, nativeTree);\n  }\n\n}\n\nfunction toElement(t) {\n  if (t === false || t === null || t === undefined) {\n    return null;\n  }\n\n  if (isElement(t)) {\n    return t;\n  }\n\n  return {\n    [isElementSymbol]: true,\n    tag: 'Neep:Value',\n    key: t,\n    value: t,\n    children: []\n  };\n}\n\nfunction destroy(tree) {\n  if (Array.isArray(tree)) {\n    tree.forEach(t => destroy(t));\n    return;\n  }\n\n  const {\n    component\n  } = tree;\n\n  if (component) {\n    component.destroy();\n  }\n}\n\nfunction createItem$1(nObject, delivered, source) {\n  if (!source) {\n    return {\n      tag: null,\n      key: undefined,\n      children: []\n    };\n  }\n\n  const {\n    tag\n  } = source;\n\n  if (!tag) {\n    return {\n      tag: null,\n      key: undefined,\n      children: []\n    };\n  }\n\n  if (typeof tag !== 'string') {\n    if (tag[typeSymbol] === 'simple') {\n      return { ...source,\n        children: createAll$1(nObject, delivered, source.children),\n        component: undefined\n      };\n    }\n\n    return { ...source,\n      children: [],\n      component: new ComponentEntity(tag, source.props || {}, source.children, nObject, delivered)\n    };\n  }\n\n  const ltag = tag.toLowerCase();\n\n  if (ltag === 'neep:container') {\n    var _source$props;\n\n    const type = source === null || source === void 0 ? void 0 : (_source$props = source.props) === null || _source$props === void 0 ? void 0 : _source$props.type;\n    const iRender = type ? getRender(type) : nObject.iRender;\n    return { ...source,\n      children: [],\n      component: new ContainerEntity(iRender, source.props || {}, source.children, nObject, delivered)\n    };\n  }\n\n  if (ltag === 'neep:value') {\n    return { ...source,\n      children: []\n    };\n  }\n\n  if (ltag === 'neep:deliver') {\n    const props = { ...source.props\n    };\n    delete props.ref;\n    delete props.slot;\n    delete props.key;\n    const newDelivered = updateProps(Object.create(delivered), props, {}, true);\n    return { ...source,\n      delivered: newDelivered,\n      children: createAll$1(nObject, newDelivered, source.children)\n    };\n  }\n\n  if (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n    return { ...source,\n      children: createAll$1(nObject, delivered, source.children)\n    };\n  }\n\n  return { ...source,\n    children: createAll$1(nObject, delivered, source.children)\n  };\n}\n\nfunction updateList$1(nObject, delivered, source, tree) {\n  if (!Array.isArray(tree)) {\n    tree = [tree];\n  }\n\n  const newList = [];\n\n  for (const src of recursive2iterable(source)) {\n    const node = toElement(src);\n\n    if (!node) {\n      continue;\n    }\n\n    const index = tree.findIndex(it => it.tag === node.tag && it.key === node.key);\n\n    if (index >= 0) {\n      newList.push(updateItem$1(nObject, delivered, node, tree[index]));\n      tree.splice(index, 1);\n    } else {\n      newList.push(createItem$1(nObject, delivered, node));\n    }\n  }\n\n  destroy(tree);\n  return newList;\n}\n\nfunction updateItem$1(nObject, delivered, source, tree) {\n  if (!tree) {\n    return createItem$1(nObject, delivered, source);\n  }\n\n  if (!source) {\n    destroy(tree);\n    return {\n      tag: null,\n      key: undefined,\n      children: []\n    };\n  }\n\n  if (Array.isArray(tree)) {\n    if (!tree.length) {\n      return createItem$1(nObject, delivered, source);\n    }\n\n    const index = tree.findIndex(it => it.tag === source.tag);\n\n    if (index < 0) {\n      destroy(tree);\n      return createItem$1(nObject, delivered, source);\n    }\n\n    const all = tree;\n    [tree] = tree.splice(index, 1);\n    destroy(all);\n  }\n\n  const {\n    tag\n  } = source;\n\n  if (tag !== tree.tag) {\n    destroy(tree);\n    return createItem$1(nObject, delivered, source);\n  }\n\n  if (!tag) {\n    return {\n      tag: null,\n      key: undefined,\n      children: []\n    };\n  }\n\n  if (typeof tag !== 'string') {\n    if (tag[typeSymbol] === 'simple') {\n      return { ...source,\n        children: [...updateAll$1(nObject, delivered, source.children, tree.children)],\n        component: undefined\n      };\n    }\n\n    const {\n      component\n    } = tree;\n\n    if (!component) {\n      return createItem$1(nObject, delivered, source);\n    }\n\n    component.update(source.props || {}, source.children);\n    return { ...source,\n      children: [],\n      component\n    };\n  }\n\n  const ltag = tag.toLowerCase();\n\n  if (ltag === 'neep:container') {\n    var _source$props2;\n\n    const {\n      component\n    } = tree;\n\n    if (!component) {\n      return createItem$1(nObject, delivered, source);\n    }\n\n    const type = source === null || source === void 0 ? void 0 : (_source$props2 = source.props) === null || _source$props2 === void 0 ? void 0 : _source$props2.type;\n    const iRender = type ? getRender(type) : nObject.iRender;\n\n    if (iRender !== component.iRender) {\n      return createItem$1(nObject, delivered, source);\n    }\n\n    component.update(source.props || {}, source.children);\n    return { ...source,\n      children: [],\n      component\n    };\n  }\n\n  if (ltag === 'neep:value') {\n    return { ...source,\n      children: []\n    };\n  }\n\n  if (ltag === 'neep:deliver') {\n    const props = { ...source.props\n    };\n    delete props.ref;\n    delete props.slot;\n    delete props.key;\n    const newDelivered = updateProps(tree.delivered || Object.create(delivered), props, tree.props, true);\n    return { ...source,\n      delivered: newDelivered,\n      children: [...updateAll$1(nObject, newDelivered, source.children, tree.children)]\n    };\n  }\n\n  if (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n    return { ...source,\n      children: [...updateAll$1(nObject, delivered, source.children, tree.children)]\n    };\n  }\n\n  return { ...source,\n    children: [...updateAll$1(nObject, delivered, source.children, tree.children)]\n  };\n}\n\nfunction createAll$1(nObject, delivered, source) {\n  if (!Array.isArray(source)) {\n    source = [source];\n  }\n\n  if (!source.length) {\n    return [];\n  }\n\n  return source.map(item => {\n    if (!Array.isArray(item)) {\n      return createItem$1(nObject, delivered, toElement(item));\n    }\n\n    return [...recursive2iterable(item)].map(it => createItem$1(nObject, delivered, toElement(it)));\n  });\n}\n\nfunction* updateAll$1(nObject, delivered, source, tree) {\n  if (!Array.isArray(source)) {\n    source = [source];\n  }\n\n  let index = 0;\n  let length = Math.min(source.length, source.length);\n\n  for (; index < length; index++) {\n    const src = source[index];\n\n    if (Array.isArray(src)) {\n      yield updateList$1(nObject, delivered, src, tree[index]);\n    } else {\n      yield updateItem$1(nObject, delivered, toElement(src), tree[index]);\n    }\n  }\n\n  length = Math.max(source.length, source.length);\n\n  if (tree.length > length) {\n    for (; index < length; index++) {\n      destroy(tree[index]);\n    }\n  }\n\n  if (source.length > length) {\n    for (; index < length; index++) {\n      const src = toElement(source[index]);\n\n      if (Array.isArray(src)) {\n        yield [...recursive2iterable(src)].map(it => createItem$1(nObject, delivered, it));\n      } else {\n        yield createItem$1(nObject, delivered, src);\n      }\n    }\n  }\n}\n\nfunction convert(nObject, source, tree) {\n  if (!tree) {\n    return createAll$1(nObject, nObject.delivered, source);\n  }\n\n  return [...updateAll$1(nObject, nObject.delivered, source, tree)];\n}\n\nlet awaitDraw = new Set();\nlet requested = false;\n\nfunction markDraw(c) {\n  awaitDraw.add(c);\n\n  if (requested) {\n    return;\n  }\n\n  requested = true;\n  nextFrame(() => {\n    requested = false;\n    const list = [...awaitDraw];\n    awaitDraw.clear();\n    list.map(c => c.drawAll());\n  });\n}\n\nclass ContainerEntity extends EntityObject {\n  constructor(iRender, props, children, parent, delivered) {\n    super(iRender, parent, delivered);\n\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"content\", []);\n\n    _defineProperty(this, \"_node\", null);\n\n    _defineProperty(this, \"_container\", null);\n\n    _defineProperty(this, \"rootContainer\", this);\n\n    _defineProperty(this, \"_drawChildren\", false);\n\n    _defineProperty(this, \"_drawContainer\", false);\n\n    _defineProperty(this, \"_awaitDraw\", new Set());\n\n    _defineProperty(this, \"_needDraw\", false);\n\n    _defineProperty(this, \"_containers\", new Set());\n\n    this.props = props;\n    this.parent = parent;\n\n    if (parent) {\n      this.rootContainer = parent.container.rootContainer;\n    }\n\n    this.callHook('beforeCreate');\n    this.childNodes = children;\n\n    const refresh = changed => {\n      if (!changed) {\n        return;\n      }\n\n      this._drawChildren = true;\n      this.refresh();\n    };\n\n    const slots = Object.create(null);\n    this._render = monitor(refresh, () => init(this, this.delivered, this.childNodes, slots, [], false));\n    this._nodes = convert(this, this._render());\n    this.callHook('created');\n    this.created = true;\n  }\n\n  setChildren(children) {\n    if (this.destroyed) {\n      return;\n    }\n\n    this.childNodes = children;\n    this._drawChildren = true;\n    this.refresh();\n  }\n\n  setProps(props) {\n    if (this.destroyed) {\n      return;\n    }\n\n    this.props = props;\n    this._drawContainer = true;\n    this.refresh();\n  }\n\n  update(props, children) {\n    this.refresh(() => {\n      this.setProps(props);\n      this.setChildren(children);\n    });\n  }\n\n  requestDraw() {\n    this.markDraw(this);\n  }\n\n  _mount() {\n    const {\n      props,\n      parent,\n      iRender\n    } = this;\n    const content = draw(this.container.iRender, this._nodes);\n    this.content = content;\n    const [container, node] = iRender.mount(props, parent === null || parent === void 0 ? void 0 : parent.iRender);\n\n    for (const it of getNodes(content)) {\n      iRender.insertNode(container, it);\n    }\n\n    this.tree = [createMountedNode({\n      tag: Value,\n      key: undefined,\n      component: undefined,\n      node,\n      value: node,\n      children: []\n    })];\n    this._node = node;\n    this._container = container;\n  }\n\n  _destroy() {\n    destroy(this.content);\n  }\n\n  _unmount() {\n    const {\n      parent,\n      iRender\n    } = this;\n\n    if (parent) {\n      unmount(parent.iRender, this.tree);\n    }\n\n    iRender.unmount(this._container, this._node, Boolean(parent));\n    unmount(this.iRender, this.content);\n  }\n\n  _draw() {\n    const {\n      _drawChildren: drawChildren,\n      _drawContainer: drawContainer\n    } = this;\n    this._drawContainer = false;\n\n    if (drawContainer) {\n      var _this$parent;\n\n      this.iRender.drawContainer(this._container, this._node, this.props, (_this$parent = this.parent) === null || _this$parent === void 0 ? void 0 : _this$parent.iRender);\n    }\n\n    if (this.parent && this.parent.iRender !== this.iRender) {\n      return;\n    }\n\n    this._drawChildren = false;\n\n    if (drawChildren) {\n      this.content = draw(this.iRender, this._nodes, this.content);\n    }\n  }\n\n  _drawSelf() {\n    const {\n      _drawChildren: drawChildren,\n      _drawContainer: drawContainer\n    } = this;\n    this._needDraw = false;\n    this._drawChildren = false;\n    this._drawContainer = false;\n\n    if (drawContainer) {\n      var _this$parent2;\n\n      this.iRender.drawContainer(this._container, this._node, this.props, (_this$parent2 = this.parent) === null || _this$parent2 === void 0 ? void 0 : _this$parent2.iRender, true);\n    }\n\n    if (drawChildren) {\n      this.content = draw(this.iRender, this._nodes, this.content);\n    }\n  }\n\n  drawSelf() {\n    if (!this.mounted) {\n      return;\n    }\n\n    if (this.destroyed) {\n      return;\n    }\n\n    this.callHook('beforeDraw');\n    exec$1(c => c && this.markDraw(this), () => this._drawSelf());\n    complete(() => this.callHook('drawn'));\n  }\n\n  markDraw(nObject, remove = false) {\n    var _this$parent3;\n\n    if (((_this$parent3 = this.parent) === null || _this$parent3 === void 0 ? void 0 : _this$parent3.iRender) === this.iRender) {\n      this.parent.container.markDraw(nObject, remove);\n      return;\n    }\n\n    if (nObject === this && this.parent) {\n      this.parent.container.markDraw(this, remove);\n      this._needDraw = !remove;\n    } else if (remove) {\n      this._awaitDraw.delete(nObject);\n    } else {\n      this._awaitDraw.add(nObject);\n    }\n\n    this.rootContainer.markDrawContainer(this, !this._needDraw && !this._awaitDraw.size || this.destroyed);\n  }\n\n  drawContainer() {\n    const {\n      _node: node,\n      _container: container,\n      _awaitDraw: awaitDraw\n    } = this;\n\n    if (!node || !container) {\n      return;\n    }\n\n    this.callHook('beforeDraw');\n    const needDraw = this._needDraw;\n    this._needDraw = false;\n    const list = [...awaitDraw];\n    awaitDraw.clear();\n\n    if (needDraw) {\n      this.drawSelf();\n    }\n\n    list.map(c => c.draw());\n    this.iRender.drawNode(container, node);\n    complete(() => this.callHook('drawn'));\n  }\n\n  markDrawContainer(container, remove = false) {\n    if (remove) {\n      this._containers.delete(container);\n    } else {\n      this._containers.add(container);\n    }\n\n    markDraw(this);\n  }\n\n  drawAll() {\n    const containers = this._containers;\n\n    if (!containers.size) {\n      return;\n    }\n\n    this.callHook('beforeDrawAll');\n    const refs = [];\n    const completeList = [];\n    setCompleteList(completeList);\n    setRefList(refs);\n    const list = [...containers];\n    containers.clear();\n    list.forEach(c => c.drawContainer());\n    setRefList();\n    refs.forEach(r => r());\n    completeList.forEach(r => r());\n    this.callHook('drawnAll');\n  }\n\n}\n\nfunction render(e, p = {}) {\n  let params = { ...p\n  };\n  const container = new ContainerEntity(getRender(p.type), params, e === undefined ? [] : isElement(e) ? [e] : [createElement(e)]);\n\n  if (!isProduction) {\n    devtools.renderHook(container);\n  }\n\n  const {\n    exposed\n  } = container;\n  Reflect.defineProperty(exposed, '$update', {\n    value(c) {\n      container.setChildren(c === undefined ? [] : isElement(c) ? [c] : [createElement(c)]);\n      return exposed;\n    },\n\n    configurable: true\n  });\n  Reflect.defineProperty(exposed, '$mount', {\n    value(target) {\n      if (exposed.$mounted) {\n        return exposed;\n      }\n\n      if (target) {\n        params.target = target;\n        container.setProps(params);\n      }\n\n      container.mount();\n      return exposed;\n    },\n\n    configurable: true\n  });\n  Reflect.defineProperty(exposed, '$unmount', {\n    value() {\n      if (!exposed.$mounted) {\n        return;\n      }\n\n      if (exposed.$unmounted) {\n        return;\n      }\n\n      if (exposed.$destroyed) {\n        return container.destroy();\n      }\n\n      container.unmount();\n    },\n\n    configurable: true\n  });\n\n  if (params.target) {\n    container.mount();\n  }\n\n  return exposed;\n}\n\nfunction Mark(symbol, value) {\n  return component => {\n    component[symbol] = value;\n    return component;\n  };\n}\n\nfunction MarkValue(symbol, key, value) {\n  return component => {\n    let obj = component[symbol];\n\n    if (!obj) {\n      obj = Object.create(null);\n      component[symbol] = obj;\n    }\n\n    obj[key] = value;\n    return component;\n  };\n}\n\nfunction mName(name, component) {\n  if (!component) {\n    return Mark(nameSymbol, name);\n  }\n\n  component[nameSymbol] = name;\n  return component;\n}\nfunction mType(type, component) {\n  if (!component) {\n    return Mark(typeSymbol, type);\n  }\n\n  component[typeSymbol] = type;\n  return component;\n}\nfunction mSimple(component) {\n  if (!component) {\n    return Mark(typeSymbol, 'simple');\n  }\n\n  component[typeSymbol] = 'simple';\n  return component;\n}\nfunction mNative(component) {\n  if (!component) {\n    return Mark(typeSymbol, 'native');\n  }\n\n  component[typeSymbol] = 'native';\n  return component;\n}\nfunction mRender(fn, component) {\n  if (!component) {\n    return Mark(renderSymbol, fn);\n  }\n\n  component[renderSymbol] = fn;\n  return component;\n}\nfunction mConfig(name, config, component) {\n  const mark = MarkValue(configSymbol, name, config);\n\n  if (!component) {\n    return mark;\n  }\n\n  return mark(component);\n}\nfunction mComponent(name, item, component) {\n  const mark = MarkValue(componentsSymbol, name, item);\n\n  if (!component) {\n    return mark;\n  }\n\n  return mark(component);\n}\nfunction create(c, r) {\n  if (typeof r === 'function') {\n    c[renderSymbol] = r;\n  }\n\n  return c;\n}\nfunction mark(component, ...marks) {\n  for (const m of marks) {\n    m(component);\n  }\n\n  return component;\n}\n\nfunction lazy(component, Placeholder) {\n  const reslut = value(0);\n  const ComponentValue = value(undefined);\n\n  async function load() {\n    if (reslut()) {\n      return;\n    }\n\n    reslut(1);\n\n    try {\n      const c = await component();\n\n      if (typeof c === 'function') {\n        ComponentValue(c);\n        return;\n      }\n\n      if (!c) {\n        reslut(-1);\n        return;\n      }\n\n      if (typeof c.default === 'function') {\n        ComponentValue(c.default);\n        return;\n      }\n\n      reslut(-1);\n    } catch (_unused) {\n      reslut(-1);\n    }\n  }\n\n  function Lazy(props, {\n    childNodes\n  }) {\n    const com = ComponentValue();\n\n    if (com) {\n      return createElement(com, props, ...childNodes);\n    }\n\n    load();\n\n    if (!Placeholder) {\n      return null;\n    }\n\n    return createElement(Placeholder, {\n      loading: reslut() > 0\n    });\n  }\n\n  return mark(Lazy, mSimple, mName('Lazy'));\n}\n\nexport { Container, Deliver, NeepError as Error, EventEmitter, Fragment, ScopeSlot, Slot, SlotRender, Template, Value, addContextConstructor, addEntityConstructor, byService, callHook, checkCurrent, componentsSymbol, configSymbol, create, createElement, current, deliver, elements, expose, getRect, hook, install, isElement, isElementSymbol, isProduction, label$1 as label, lazy, mComponent, mConfig, mName, mNative, mRender, mSimple, mType, mark, nameSymbol, refresh, register, render, renderSymbol, setHook, typeSymbol, useService, useValue, version, watch };\n","/*!\n * NeepWebRender v0.1.0-alpha.12\n * (c) 2019-2020 Fierflame\n * @license MIT\n */\nimport { install as install$1, isValue, EventEmitter } from '@neep/core';\n\nfunction installNeep() {\n  return install$1;\n}\n\nfunction getId(v) {\n  if (typeof v === 'string') {\n    return v;\n  }\n\n  if (typeof v === 'number') {\n    return String(v);\n  }\n\n  return undefined;\n}\n\nfunction updateId(props, el, old) {\n  const id = getId(isValue(props.id) ? props.id() : props.id);\n\n  if (id !== old) {\n    if (typeof id === 'string') {\n      el.id = props.id;\n    } else {\n      el.removeAttribute('id');\n    }\n  }\n\n  return id;\n}\n\nfunction* recursive2iterable(list) {\n  if (isValue(list)) {\n    yield* recursive2iterable(list());\n    return;\n  }\n\n  if (!Array.isArray(list)) {\n    yield list;\n    return;\n  }\n\n  for (const it of list) {\n    yield* recursive2iterable(it);\n  }\n}\n\nfunction getClass(list) {\n  const set = new Set();\n\n  for (const v of recursive2iterable(list)) {\n    if (!v) {\n      continue;\n    }\n\n    if (typeof v === 'string') {\n      for (let k of v.split(' ').filter(Boolean)) {\n        set.add(k);\n      }\n    } else if (typeof v === 'object') {\n      for (const k in v) {\n        const add = v[k];\n\n        for (let it of k.split(' ').filter(Boolean)) {\n          set[add ? 'add' : 'delete'](it);\n        }\n      }\n    }\n  }\n\n  if (!set.size) {\n    return undefined;\n  }\n\n  return set;\n}\n\nfunction update(el, classes, oClasses) {\n  if (classes && oClasses) {\n    const list = el.getAttribute('class') || '';\n    const classList = new Set(list.split(' ').filter(Boolean));\n    oClasses.forEach(c => classList.delete(c));\n    classes.forEach(c => classList.add(c));\n    el.setAttribute('class', [...classList].join(' '));\n  } else if (classes) {\n    el.setAttribute('class', [...classes].join(' '));\n  } else if (oClasses) {\n    el.removeAttribute('class');\n  }\n}\n\nfunction updateClass(props, el, old) {\n  const classes = getClass(isValue(props.class) ? props.class() : props.class);\n  update(el, classes, old);\n  return classes;\n}\n\nfunction getStyle(style) {\n  if (typeof style === 'string') {\n    return style;\n  }\n\n  if (!style) {\n    return undefined;\n  }\n\n  if (typeof style !== 'object') {\n    return undefined;\n  }\n\n  const css = Object.create(null);\n\n  for (let k in style) {\n    let value = style[k];\n    const key = k.substr(0, 2) === '--' ? k : k.replace(/[A-Z]/g, '-$1').replace(/-+/g, '-').toLowerCase();\n\n    if (typeof value === 'number') {\n      css[key] = [value === 0 ? '0' : `${value}px`, null];\n    } else if (value && typeof value === 'string') {\n      const v = value.replace(/!important\\s*$/, '');\n      css[key] = [v, v === value ? null : 'important'];\n    }\n  }\n\n  return css;\n}\n\nfunction update$1(css, style, oStyle) {\n  if (!style) {\n    if (!oStyle) {\n      return;\n    }\n\n    if (typeof oStyle === 'string') {\n      css.cssText = '';\n      return;\n    }\n\n    for (const k of Object.keys(oStyle)) {\n      css.removeProperty(k);\n    }\n\n    return;\n  }\n\n  if (typeof style === 'string') {\n    if (style !== typeof oStyle) {\n      css.cssText = style;\n    }\n\n    return;\n  }\n\n  if (!oStyle || typeof oStyle === 'string') {\n    if (typeof oStyle === 'string') {\n      css.cssText = '';\n    }\n\n    for (const k of Object.keys(style)) {\n      css.setProperty(k, ...style[k]);\n    }\n\n    return;\n  }\n\n  for (const k of Object.keys(style)) {\n    const v = style[k];\n\n    if (!oStyle[k] || oStyle[k][0] !== v[0] || oStyle[k][1] !== v[1]) {\n      css.setProperty(k, ...v);\n    }\n  }\n\n  for (const k of Object.keys(oStyle)) {\n    if (!style[k]) {\n      css.removeProperty(k);\n    }\n  }\n}\n\nfunction updateStyle(props, css, old, hasStyle) {\n  if (!hasStyle) {\n    return undefined;\n  }\n\n  const style = getStyle(isValue(props.style) ? props.style() : props.style);\n  update$1(css, style, old);\n  return style;\n}\n\nfunction setAttrs(el, attrs) {\n  if (el instanceof HTMLInputElement && 'checked' in attrs) {\n    switch (el.type.toLowerCase()) {\n      case 'checkbox':\n      case 'radio':\n        if (attrs.checked !== null !== el.checked) {\n          el.checked = attrs.checked !== null;\n        }\n\n    }\n  }\n\n  if ((el instanceof HTMLSelectElement || el instanceof HTMLInputElement) && 'value' in attrs) {\n    const value = attrs.value || '';\n\n    if (el.value !== value) {\n      el.value = value;\n    }\n  }\n}\n\nfunction stringify(data, isOn = false) {\n  if (data === undefined || data === null) {\n    return data;\n  }\n\n  if (isOn && typeof data === 'function') {\n    return undefined;\n  }\n\n  if (typeof data === 'boolean') {\n    return data ? '' : null;\n  }\n\n  if (typeof data !== 'object') {\n    return String(data);\n  }\n\n  if (data instanceof Date) {\n    return data.toISOString();\n  }\n\n  if (data instanceof RegExp) {\n    return data.toString();\n  }\n\n  return JSON.stringify(data);\n}\n\nfunction getAttrs(props, hasStyle) {\n  const attrs = Object.create(null);\n\n  for (const k in props) {\n    if (/^(n|on|bind|slot)[:-]/.test(k)) {\n      continue;\n    }\n\n    if (!/^[a-zA-Z:_][a-zA-Z0-9:_-]*$/.test(k)) {\n      continue;\n    }\n\n    const name = k.toLowerCase();\n\n    switch (name) {\n      case 'style':\n        if (!hasStyle) {\n          break;\n        }\n\n      case 'ref':\n      case 'is':\n      case 'id':\n      case 'class':\n        continue;\n    }\n\n    let data = props[k];\n\n    if (isValue(data)) {\n      data = data();\n    }\n\n    const value = stringify(data, name.substr(0, 2) === 'on');\n\n    if (value !== undefined) {\n      attrs[name] = value;\n    }\n  }\n\n  return attrs;\n}\n\nfunction update$2(el, attrs, old) {\n  for (const k of Object.keys(attrs)) {\n    const v = attrs[k];\n\n    if (!(k in old) || old[k] !== v) {\n      if (v === null) {\n        el.removeAttribute(k);\n      } else {\n        el.setAttribute(k, v);\n      }\n    }\n  }\n\n  for (const k of Object.keys(old)) {\n    if (!(k in attrs)) {\n      el.removeAttribute(k);\n    }\n  }\n}\n\nfunction updateAttrs(props, el, old, hasStyle) {\n  const attrs = getAttrs(props, hasStyle);\n  update$2(el, attrs, old);\n  setAttrs(el, attrs);\n  return attrs;\n}\n\nfunction createEventEmitter() {\n  const events = new EventEmitter();\n  events.__eventBind = Object.create(null);\n  return events;\n}\n\nfunction* getElementModel(el) {\n  if (el instanceof HTMLInputElement) {\n    switch (el.type.toLowerCase()) {\n      case 'checkbox':\n      case 'radio':\n        return yield ['checked', 'change', e => e.currentTarget.checked];\n    }\n\n    return yield ['value', 'input', e => e.currentTarget.value];\n  }\n\n  if (el instanceof HTMLSelectElement) {\n    return yield ['value', 'select', e => e.currentTarget.value];\n  }\n}\n\nfunction getEventName(k) {\n  if (k.substr(0, 2) !== 'on') {\n    return '';\n  }\n\n  let n = k.substr(2);\n\n  if (n[0] === ':' || n[0] === '-') {\n    return '';\n  }\n\n  return n;\n}\n\nfunction updateEvent(props, el, event = createEventEmitter()) {\n  event.updateInProps(props, addEvent => {\n    for (const k in props) {\n      const f = props[k];\n\n      if (typeof f !== 'function') {\n        continue;\n      }\n\n      const name = getEventName(k);\n\n      if (!name) {\n        continue;\n      }\n\n      addEvent(name, f);\n    }\n\n    for (const [prop, name, t] of getElementModel(el)) {\n      const value = props[prop];\n\n      if (isValue(value)) {\n        addEvent(name, e => value(t(e)));\n      }\n    }\n  });\n  const names = new Set(event.names.map(String));\n  const eventBind = event.__eventBind;\n\n  for (const k of Object.keys(eventBind)) {\n    if (names.has(k)) {\n      continue;\n    }\n\n    eventBind[k]();\n    delete eventBind[k];\n  }\n\n  const {\n    emit\n  } = event;\n\n  for (const k of names) {\n    if (k in eventBind) {\n      continue;\n    }\n\n    const f = (...p) => emit(k, ...p);\n\n    el.addEventListener(k, f);\n\n    eventBind[k] = () => {\n      el.removeEventListener(k, f);\n    };\n  }\n\n  return event;\n}\n\nconst PropsMap = new WeakMap();\nfunction update$3(el, props) {\n  const css = el.style;\n  const hasStyle = css instanceof CSSStyleDeclaration;\n  const old = PropsMap.get(el) || {\n    attrs: {}\n  };\n  const id = updateId(props, el, old.id);\n  const classes = updateClass(props, el, old.classes);\n  const style = updateStyle(props, css, old.style, hasStyle);\n  const attrs = updateAttrs(props, el, old.attrs, hasStyle);\n  const event = updateEvent(props, el, old.event);\n  PropsMap.set(el, {\n    id,\n    classes,\n    style,\n    attrs,\n    event\n  });\n  return el;\n}\n\nlet list;\nfunction nextFrame(f) {\n  if (list) {\n    list.push(f);\n    return;\n  }\n\n  list = [f];\n  window.requestAnimationFrame(() => {\n    const fs = list;\n    list = undefined;\n\n    if (!fs) {\n      return;\n    }\n\n    fs.forEach(f => f());\n  });\n}\n\nconst xmlnsMap = {\n  svg: 'http://www.w3.org/2000/svg',\n  html: 'http://www.w3.org/1999/xhtml',\n  mathml: 'http://www.w3.org/1998/Math/MathML'\n};\nconst SVGTags = new Set(['altGlyph', 'altGlyphDef', 'altGlyphItem', 'animate', 'animateColor', 'animateMotion', 'animateTransform', 'circle', 'clipPath', 'color-profile', 'cursor', 'defs', 'desc', 'ellipse', 'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignObject', 'g', 'glyph', 'glyphRef', 'hkern', 'image', 'line', 'linearGradient', 'marker', 'mask', 'metadata', 'missing-glyph', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'script', 'set', 'stop', 'style', 'svg', 'switch', 'symbol', 'text', 'textPath', 'title', 'tref', 'tspan', 'use', 'view', 'vkern']);\nconst MathMLTags = new Set(['maction', 'math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msubsup', 'msup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'semantics']);\nfunction createElement(tagname, namespace) {\n  const res = /^([a-z][a-z0-9-]*):([a-z0-9-]+)$/i.exec(tagname);\n  const tag = res ? res[2] : tagname;\n  const ns = (namespace || (res === null || res === void 0 ? void 0 : res[1]) || SVGTags.has(tag.toLowerCase()) && 'svg' || MathMLTags.has(tag.toLowerCase()) && 'mathml' || '').toLowerCase();\n\n  if (!ns) {\n    return document.createElement(tag);\n  }\n\n  return document.createElementNS(ns in xmlnsMap && xmlnsMap[ns] || ns, tag);\n}\n\nconst tagRegex = /^[a-z][a-z0-9]*(?:-[a-z0-9]+)?(?::[a-z0-9]+(?:-[a-z0-9]+)?)?$/i;\nfunction isTagName(tag) {\n  if (typeof tag !== 'string') {\n    return false;\n  }\n\n  return tagRegex.test(tag);\n}\n\nconst render = {\n  type: 'web',\n  nextFrame,\n\n  isNode(v) {\n    return v instanceof Node;\n  },\n\n  mount({\n    target,\n    class: className,\n    style,\n    tag\n  }, parent) {\n    if (!isTagName(tag)) {\n      tag = 'div';\n    }\n\n    const container = render.createElement(tag, {\n      class: className,\n      style\n    });\n\n    if (typeof target === 'string') {\n      target = document.querySelector(target);\n    }\n\n    if (target instanceof Element) {\n      target.appendChild(container);\n\n      if (parent) {\n        return [container, parent.createPlaceholder()];\n      }\n\n      return [container, container];\n    }\n\n    if (parent !== render) {\n      document.body.appendChild(container);\n      return [container, container];\n    }\n\n    return [container, container];\n  },\n\n  unmount(container, node, removed) {\n    if (container === node && removed) {\n      return;\n    }\n\n    container.remove();\n  },\n\n  drawContainer(container, node, {\n    target,\n    class: className,\n    style,\n    tag\n  }, parent) {\n    render.updateProps(container, {\n      class: className,\n      style\n    });\n\n    if (typeof target === 'string') {\n      target = document.querySelector(target);\n    }\n\n    if (parent !== render && !(target instanceof Element)) {\n      target = document.body;\n    }\n\n    const oldTarget = parent === render && container === node ? undefined : render.getParent(node);\n\n    if (oldTarget === target) {\n      return [container, node];\n    }\n\n    if (parent !== render) {\n      target.appendChild(container);\n      return [container, node];\n    }\n\n    if (!oldTarget) {\n      const newNode = parent.createPlaceholder();\n      const pNode = parent.getParent(node);\n\n      if (pNode) {\n        render.insertNode(pNode, newNode, node);\n        render.removeNode(node);\n      }\n\n      return [container, newNode];\n    }\n\n    if (!target) {\n      const pNode = parent.getParent(node);\n\n      if (pNode) {\n        render.insertNode(pNode, container, node);\n        render.removeNode(node);\n      }\n\n      return [container, container];\n    }\n\n    target.appendChild(node);\n    return [container, node];\n  },\n\n  drawNode() {},\n\n  createElement(tag, props) {\n    return update$3(createElement(tag), props);\n  },\n\n  createText(text) {\n    return document.createTextNode(text);\n  },\n\n  createPlaceholder() {\n    return document.createComment('');\n  },\n\n  createComponent() {\n    const node = createElement('neep-component');\n    return [node, node.attachShadow({\n      mode: 'open'\n    })];\n  },\n\n  getParent(node) {\n    return node.parentNode;\n  },\n\n  nextNode(node) {\n    return node.nextSibling;\n  },\n\n  updateProps(node, props) {\n    update$3(node, props);\n  },\n\n  insertNode(parent, node, next = null) {\n    parent.insertBefore(node, next);\n  },\n\n  removeNode(node) {\n    const p = render.getParent(node);\n\n    if (!p) {\n      return;\n    }\n\n    p.removeChild(node);\n  },\n\n  getRect(node) {\n    if (node instanceof Element) {\n      const {\n        top,\n        right,\n        bottom,\n        left,\n        width,\n        height\n      } = node.getBoundingClientRect();\n      return {\n        top,\n        right,\n        bottom,\n        left,\n        width,\n        height\n      };\n    }\n\n    if (node instanceof ShadowRoot) {\n      const {\n        top,\n        right,\n        bottom,\n        left,\n        width,\n        height\n      } = node.host.getBoundingClientRect();\n      return {\n        top,\n        right,\n        bottom,\n        left,\n        width,\n        height\n      };\n    }\n\n    return null;\n  }\n\n};\n\ninstallNeep()({\n  render\n});\nfunction install(Neep) {}\n\nvar index = { ...render,\n  install\n};\n\nexport default index;\n","/*!\n * NeepDevtools v0.1.0-alpha.7\n * (c) 2019-2020 Fierflame\n * @license MIT\n */\nimport { install as install$2, nameSymbol, typeSymbol, createElement, isValue, Slot, encase, asValue, setHook, render } from '@neep/core';\n\nfunction install() {\n  return install$2;\n}\n\nlet Type;\n\n(function (Type) {\n  Type[\"tag\"] = \"tag\";\n  Type[\"placeholder\"] = \"placeholder\";\n  Type[\"standard\"] = \"standard\";\n  Type[\"simple\"] = \"simple\";\n  Type[\"native\"] = \"native\";\n  Type[\"container\"] = \"container\";\n  Type[\"special\"] = \"special\";\n})(Type || (Type = {}));\n\nfunction* getTree(tree, parent = 0) {\n  var _component$exposed;\n\n  if (Array.isArray(tree)) {\n    for (const it of tree) {\n      yield* getTree(it);\n    }\n\n    return;\n  }\n\n  const {\n    id: tagId,\n    tag,\n    props,\n    children,\n    key,\n    component,\n    label = component === null || component === void 0 ? void 0 : (_component$exposed = component.exposed) === null || _component$exposed === void 0 ? void 0 : _component$exposed.$label\n  } = tree;\n\n  if (!tag) {\n    return yield {\n      tagId,\n      parent,\n      type: Type.placeholder,\n      tag: 'placeholder',\n      children: []\n    };\n  }\n\n  if (typeof tag !== 'string') {\n    const name = tag[nameSymbol] || tag.name;\n\n    if (!component) {\n      return yield {\n        tagId,\n        parent,\n        type: Type.simple,\n        tag: name,\n        children: [...getTree(children)],\n        props,\n        key,\n        label\n      };\n    }\n\n    const isNative = tag[typeSymbol] === 'native';\n    return yield {\n      tagId,\n      parent,\n      type: isNative ? Type.native : Type.standard,\n      tag: name,\n      children: [...getTree(isNative ? component.nativeTree : component.tree)],\n      props,\n      key,\n      label\n    };\n  }\n\n  const ltag = tag.toLowerCase();\n\n  if (ltag === 'neep:container') {\n    return yield {\n      tagId,\n      parent,\n      type: Type.container,\n      tag: ltag,\n      children: [...getTree(component ? component.content : children)],\n      props,\n      key,\n      label\n    };\n  }\n\n  if (ltag === 'neep:value') {\n    const treeValue = tree.value;\n    return yield {\n      tagId,\n      parent,\n      type: Type.special,\n      tag: ltag,\n      children: [],\n      isNative: treeValue === tree.node,\n      value: treeValue,\n      props,\n      key,\n      label\n    };\n  }\n\n  if (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n    return yield {\n      tagId,\n      parent,\n      type: Type.special,\n      tag: ltag,\n      children: [...getTree(children)],\n      props,\n      key,\n      label\n    };\n  }\n\n  yield {\n    tagId,\n    parent,\n    type: Type.tag,\n    tag,\n    children: [...getTree(children)],\n    props,\n    key,\n    label\n  };\n}\n\nfunction getValue(value) {\n  const type = typeof value;\n\n  if (type === 'function') {\n    return createElement(\"span\", {\n      style: \"font-weight: bold;\"\n    }, \"[Function]\");\n  }\n\n  if (type === 'string') {\n    return createElement(\"span\", null, value);\n  }\n\n  if (type === 'bigint' || type === 'boolean' || type === 'number' || type === 'symbol' || type === 'undefined' || value === null) {\n    return createElement(\"span\", {\n      style: \"font-style: italic;\"\n    }, String(value));\n  } else if (value instanceof RegExp) {\n    return createElement(\"span\", {\n      style: \"font-weight: bold;\"\n    }, String(value));\n  } else if (value instanceof Date) {\n    return createElement(\"span\", {\n      style: \"font-weight: bold;\"\n    }, value.toISOString());\n  } else if (type === 'object') {\n    return createElement(\"span\", {\n      style: \"font-style: italic;\"\n    }, String(value));\n  }\n\n  return null;\n}\nfunction TextNode({\n  isNative,\n  value\n}) {\n  if (isNative) {\n    return createElement(\"span\", {\n      style: \"font-weight: bold;\"\n    }, \"[Native]\");\n  }\n\n  if (!isValue(value)) {\n    return getValue(value);\n  }\n\n  return createElement(\"template\", null, createElement(\"span\", {\n    style: \"font-weight: bold;\"\n  }, \"[Value:\\xA0\"), getValue(value()), createElement(\"span\", {\n    style: \"font-weight: bold;\"\n  }, \"\\xA0]\"));\n}\n\nfunction getKey(key) {\n  if (typeof key === 'string') {\n    return ` key=${JSON.stringify(key)}`;\n  }\n\n  if (typeof key === 'number') {\n    return ` key=${key}`;\n  }\n\n  if (typeof key === 'boolean') {\n    return ` key=${key}`;\n  }\n\n  if (typeof key === 'bigint') {\n    return ` key=${key}`;\n  }\n\n  if (typeof key === 'symbol') {\n    return ` key=${String(key)}`;\n  }\n\n  if (key === null) {\n    return ` key=${key}`;\n  }\n\n  if (key !== undefined) {\n    return ` key=${String(key)}`;\n  }\n}\nfunction getLabels(labels) {\n  return labels.filter(Boolean).map(([v, color]) => createElement(\"span\", {\n    style: `color: ${color || '#000'}`\n  }, v));\n}\n\nfunction Tag({\n  keys,\n  tagId,\n  key,\n  labels,\n  options,\n  children\n}) {\n  const opened = keys[tagId];\n  const childNodes = opened ? [...getList(children, keys, options)] : [];\n  const hasChildNodes = Boolean(opened && childNodes.length);\n  return createElement(\"div\", {\n    key: tagId,\n    style: \" position: relative; min-height: 20px; font-size: 14px; line-height: 20px; \"\n  }, createElement(\"div\", {\n    style: \" position: absolute; left: -20px; top: 0; width: 20px; height: 20px; text-align: center; cursor: pointer; background: #DDD;; \",\n    onclick: () => keys[tagId] = !opened\n  }, opened ? '-' : '+'), createElement(\"div\", null, '<', createElement(Slot, null), getKey(key), '>', !hasChildNodes && createElement(\"template\", null, opened ? createElement(\"span\", null) : createElement(\"span\", {\n    onclick: () => keys[tagId] = true,\n    style: \"cursor: pointer;\"\n  }, \"...\"), '</', createElement(Slot, null), '>'), getLabels(labels)), hasChildNodes && createElement(\"template\", null, createElement(\"div\", {\n    style: \"padding-left: 20px\"\n  }, childNodes), createElement(\"div\", null, '</', createElement(Slot, null), '>')));\n}\n\nfunction PlaceholderTag({\n  name = 'placeholder',\n  tagId,\n  key,\n  labels\n}) {\n  return createElement(\"div\", {\n    key: tagId,\n    style: \" position: relative; min-height: 20px; font-size: 14px; line-height: 20px; \"\n  }, '<', createElement(\"span\", {\n    style: \"font-style: italic;\"\n  }, name), getKey(key), '/>', getLabels(labels));\n}\n\nfunction* getList(list, keys, options, labels = []) {\n  if (Array.isArray(list)) {\n    for (const it of list) {\n      yield* getList(it, keys, options, labels);\n    }\n\n    return;\n  }\n\n  const {\n    tagId,\n    type,\n    tag,\n    children,\n    props,\n    key,\n    label,\n    value,\n    isNative\n  } = list;\n  const labelList = [label, ...labels];\n\n  if (type === Type.standard || type === Type.native) {\n    return yield createElement(Tag, {\n      keys: keys,\n      tagId: tagId,\n      key: key,\n      labels: labelList,\n      options: options,\n      children: children\n    }, createElement(\"span\", {\n      style: \"font-weight: bold;\"\n    }, tag));\n  }\n\n  if (type === Type.tag) {\n    if (!options.tag) {\n      return yield* getList(children, keys, options, labelList);\n    }\n\n    return yield createElement(Tag, {\n      keys: keys,\n      tagId: tagId,\n      key: key,\n      labels: labelList,\n      options: options,\n      children: children\n    }, tag);\n  }\n\n  if (type === Type.simple) {\n    if (!options.simple) {\n      return yield* getList(children, keys, options, labelList);\n    }\n\n    return yield createElement(Tag, {\n      keys: keys,\n      tagId: tagId,\n      key: key,\n      labels: labelList,\n      options: options,\n      children: children\n    }, createElement(\"span\", {\n      style: \" font-style: italic; font-weight: bold; \"\n    }, tag));\n  }\n\n  if (type === Type.placeholder) {\n    if (!options.placeholder) {\n      return;\n    }\n\n    return yield createElement(PlaceholderTag, {\n      tagId: tagId,\n      key: key,\n      labels: labelList\n    });\n  }\n\n  if (type === Type.container) {\n    if (!options.container) {\n      return yield* getList(children, keys, options, labelList);\n    }\n\n    return yield createElement(Tag, {\n      keys: keys,\n      tagId: tagId,\n      key: key,\n      labels: labelList,\n      options: options,\n      children: children\n    }, createElement(\"span\", {\n      style: \"font-style: italic;\"\n    }, \"container\"));\n  }\n\n  if (tag === 'neep:deliver') {\n    if (!options.deliver) {\n      return yield* getList(children, keys, options, labelList);\n    }\n\n    return yield createElement(Tag, {\n      keys: keys,\n      tagId: tagId,\n      key: key,\n      labels: labelList,\n      options: options,\n      children: children\n    }, createElement(\"span\", {\n      style: \"font-style: italic;\"\n    }, \"Deliver\"));\n  }\n\n  if (tag === 'template') {\n    if (!options.template) {\n      return yield* getList(children, keys, options, labelList);\n    }\n\n    return yield createElement(Tag, {\n      keys: keys,\n      tagId: tagId,\n      key: key,\n      labels: labelList,\n      options: options,\n      children: children\n    }, createElement(\"span\", {\n      style: \"font-style: italic;\"\n    }, \"Template\"));\n  }\n\n  if (tag === 'neep:scopeslot' || tag === 'neep:scope-slot') {\n    if (!options.scopeSlot) {\n      return yield* getList(children, keys, options, labelList);\n    }\n\n    return yield createElement(Tag, {\n      keys: keys,\n      tagId: tagId,\n      key: key,\n      labels: labelList,\n      options: options,\n      children: children\n    }, createElement(\"span\", {\n      style: \"font-style: italic;\"\n    }, \"ScopeSlot\"));\n  }\n\n  if (tag === 'neep:value') {\n    if (!options.tag) {\n      return;\n    }\n\n    if (!options.value) {\n      return;\n    }\n\n    return yield createElement(TextNode, {\n      isNative: isNative,\n      value: value\n    });\n  }\n\n  if (tag === 'neep:slotrender' || tag === 'neep:slot-render') {\n    if (options.slotRender) {\n      return yield createElement(PlaceholderTag, {\n        tagId: tagId,\n        key: key,\n        labels: labelList,\n        name: \"SlotRender\"\n      });\n    }\n\n    return;\n  }\n}\n\nvar Tree = (props => {\n  const keys = encase({});\n  return () => createElement(\"div\", {\n    style: \"padding-left: 20px;\"\n  }, [...getList(props.tree, keys, props.options)]);\n});\n\nfunction Devtools (props, {}) {\n  return createElement(\"div\", null, createElement(Slot, {\n    name: \"settings\"\n  }), createElement(Slot, {\n    name: \"tree\"\n  }));\n}\n\nfunction Settings (props) {\n  const options = asValue(props.options);\n  const value = options('value');\n  const tag = options('tag');\n  const placeholder = options('placeholder');\n  const simple = options('simple');\n  const container = options('container');\n  const template = options('template');\n  const scopeSlot = options('scopeSlot');\n  const slotRender = options('slotRender');\n  const deliver = options('deliver');\n  return createElement(\"div\", null, createElement(\"label\", null, createElement(\"input\", {\n    type: \"checkbox\",\n    checked: value\n  }), \"value\"), createElement(\"label\", null, createElement(\"input\", {\n    type: \"checkbox\",\n    checked: tag\n  }), \"tag\"), createElement(\"label\", null, createElement(\"input\", {\n    type: \"checkbox\",\n    checked: placeholder\n  }), \"placeholder\"), createElement(\"label\", null, createElement(\"input\", {\n    type: \"checkbox\",\n    checked: simple\n  }), \"simple\"), createElement(\"label\", null, createElement(\"input\", {\n    type: \"checkbox\",\n    checked: container\n  }), \"container\"), createElement(\"label\", null, createElement(\"input\", {\n    type: \"checkbox\",\n    checked: template\n  }), \"template\"), createElement(\"label\", null, createElement(\"input\", {\n    type: \"checkbox\",\n    checked: scopeSlot\n  }), \"scopeSlot\"), createElement(\"label\", null, createElement(\"input\", {\n    type: \"checkbox\",\n    checked: slotRender\n  }), \"slotRender\"), createElement(\"label\", null, createElement(\"input\", {\n    type: \"checkbox\",\n    checked: deliver\n  }), \"deliver\"));\n}\n\nlet creating = false;\n\nfunction create() {\n  creating = true;\n\n  try {\n    return {\n      options: encase({\n        value: false,\n        tag: false,\n        placeholder: false,\n        simple: false,\n        container: false,\n        template: false,\n        scopeSlot: false,\n        slotRender: false,\n        deliver: false\n      }),\n      exposed: render()\n    };\n  } finally {\n    creating = false;\n  }\n}\n\nfunction renderHook(container) {\n  if (creating) {\n    return;\n  }\n\n  let app;\n\n  const getData = () => {\n    if (!app) {\n      app = create();\n    }\n\n    const tree = [...getTree(container.content)];\n    app.exposed.$update(createElement(Devtools, null, createElement(Tree, {\n      slot: \"tree\",\n      tree: tree,\n      options: app.options\n    }), createElement(Settings, {\n      slot: \"settings\",\n      options: app.options\n    })));\n  };\n\n  setHook('drawnAll', getData, container.entity);\n  setHook('mounted', () => {\n    if (!app) {\n      app = create();\n    }\n\n    getData();\n    app.exposed.$mount();\n  }, container.entity);\n}\n\nconst devtools = {\n  renderHook\n};\n\ninstall()({\n  devtools\n});\nfunction install$1(Neep) {}\n\nexport { install$1 as install };\n","import { Context } from '@neep/core';\nimport { addContextConstructor } from './neep';\n\nfunction contextConstructor(context: Context) {\n\tReflect.defineProperty(context, 'insertable', {\n\t\tvalue: context.delivered.__NeepInsertable__,\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t});\n}\n\nexport default function installContextConstructor() {\n\taddContextConstructor(contextConstructor);\n}\n","import Insertable from './Insertable';\nimport { mSimple, mName, Context } from '@neep/core';\nimport { createElement, Deliver } from './install/neep';\n\nexport interface Props {\n\tname?: string;\n\tinsertable?: Insertable;\n\t[key: string]: any;\n}\nexport default function InsertView(\n\tprops: Props,\n\t{ insertable: contextInsertable, childNodes }: Context,\n) {\n\tconst { name, insertable } = props;\n\tif (!name && insertable instanceof Insertable) {\n\t\treturn createElement(Deliver, {\n\t\t\t__NeepInsertable__: insertable,\n\t\t}, ...childNodes);\n\t}\n\tif (!name) { return childNodes; }\n\tif (insertable instanceof Insertable) {\n\t\tconst list = insertable.get(name);\n\t\tif (!list) { return null; }\n\t\treturn createElement(Deliver, {\n\t\t\t__NeepInsertable__: insertable,\n\t\t}, list.map(t => createElement(t.component, props, ...childNodes)));\n\t}\n\tif (!(contextInsertable instanceof Insertable)) {\n\t\treturn childNodes;\n\t}\n\tconst list = contextInsertable.get(name);\n\tif (!list) { return null; }\n\treturn list.map(t => createElement(t.component, props, ...childNodes));\n}\n\nmSimple(InsertView);\nmName('InsertView', InsertView);\n","import InsertView from '../InsertView';\nimport { register } from './neep';\n\nexport default function installComponents() {\n\tregister('InsertView', InsertView);\n\tregister('insert-view', InsertView);\n}\n","import installContextConstructor from './installContextConstructor';\nimport installComponents from './installComponents';\n\nexport default function install(Neep: typeof import ('@neep/core')) {\n}\ninstallComponents();\ninstallContextConstructor();\n","import { Component, mName, mSimple } from '@neep/core';\nimport install from './install';\nimport { encase } from './install/neep';\nimport InsertView from './InsertView';\n\nexport type InsertableComponent = string | Component<any, any>;\nexport interface Info {\n\tcomponent: InsertableComponent;\n\torder?: number;\n}\nexport type Item = [InsertableComponent, Info];\n\nclass Insertable {\n\treadonly parent?: Insertable;\n\tprivate _groups: {[key: string]: Readonly<Info>[]} = encase(Object.create(null));\n\tconstructor(parent?: Insertable) {\n\t\tif (parent instanceof Insertable) {\n\t\t\tthis.parent = parent;\n\t\t}\n\t}\n\tadd(\n\t\tname: string,\n\t\tcomponents: InsertableComponent | InsertableComponent[],\n\t\tinfo: Omit<Info, 'component'> | number = {},\n\t) {\n\t\tif (typeof info === 'number') { info = { order: info }; }\n\t\tconst groups = this._groups;\n\t\tif (!Array.isArray(components)) { components = [components]; }\n\t\tconst list = groups[name] ? [...groups[name]] : [];\n\t\tlist.push(...components.map(component => Object.freeze({\n\t\t\t...info as Omit<Info, 'component'>,\n\t\t\tcomponent,\n\t\t}) as Info));\n\t\tlist.sort(({order: a}, {order: b}) => (a || 0) - (b || 0));\n\t\tgroups[name] = list;\n\t}\n\tremove(name: string): void;\n\tremove(\n\t\tname: string,\n\t\tcomponent?: InsertableComponent,\n\t): void {\n\t\tconst groups = this._groups;\n\t\tconst oldList = groups[name];\n\t\tif (!oldList) { return; }\n\t\tif (!component) {\n\t\t\tgroups[name] = [];\n\t\t\treturn;\n\t\t}\n\t\tconst k = oldList.findIndex((t) => t.component === component);\n\t\tif (k < 0) { return; }\n\t\tconst list = [...oldList.slice(0, k), ...oldList.slice(k + 1)];\n\t\tgroups[name] = list;\n\t}\n\tset(\n\t\tname: string,\n\t\tcomponents: InsertableComponent | InsertableComponent[],\n\t\tinfo: Omit<Info, 'component'> | number = {},\n\t) {\n\t\tif (typeof info === 'number') { info = { order: info }; }\n\t\tconst groups = this._groups;\n\t\tif (!Array.isArray(components)) { components = [components]; }\n\t\tconst list = components.map(component => Object.freeze({\n\t\t\t...info as Omit<Info, 'component'>,\n\t\t\tcomponent,\n\t\t}) as Info);\n\t\tgroups[name] = list;\n\t}\n\tget(name: string, parent?: boolean | number): Readonly<Info>[] {\n\t\tconst groups = this._groups;\n\t\tconst list = groups[name] || [];\n\t\tif (!parent || !this.parent) { return [...list]; }\n\t\tconst parentList = this.parent.get(\n\t\t\tname,\n\t\t\ttypeof parent === 'number' ? parent - 1 : -1,\n\t\t);\n\t\tconst allList = [...parentList, ...list];\n\t\tif (list.length && parentList.length) {\n\t\t\tallList.sort(({order: a}, {order: b}) => (a || 0) - (b || 0));\n\t\t}\n\t\treturn allList;\n\t}\n\tget view() {\n\t\tconst view: Component = (props: {\n\t\t\tname?: string;\n\t\t\t[key: string]: any;\n\t\t}, ...p) =>\n\t\tInsertView({...props, insertable: this}, ...p);\n\t\tmName('Insertable', view);\n\t\tmSimple(view);\n\t\tReflect.defineProperty(this, 'view', {\n\t\t\tvalue: view,\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t});\n\t\treturn view;\n\t}\n\tstatic get install() { return install; };\n\tstatic get View() { return InsertView; };\n\tstatic readonly version = '__VERSION__';\n}\nexport default Insertable;\n","import { create, mName, createElement, Template } from '@neep/core';\nimport Insertable from '@neep/insertable';\n// 1. 定义组件。\n// 可以从其他文件 import 进来\nconst Com1 = create((props: any, {emit}) =>\n<div on-click={() => emit('click', '666')}>\n\t{props.customAttribute}组件1\n</div>);\nconst Com2 = create((p, {}) => <div>组件2</div>);\nconst Com3 = create((p, {}) => <div>组件3</div>);\nmName('Com1', Com1);\nmName('Com2', Com2);\nmName('Com3', Com3);\n\n// 2. 创建 insertable 实例\nconst insertable = new Insertable();\n\n// 3. 添加组件\ninsertable.add('insert1', Com1);\ninsertable.add('insert1', Com2);\n// 同一组件组件在同一名称下注册多次，将会被渲染多次\ninsertable.add('insert1', Com1);\n\ninsertable.add('insert2', Com3);\ninsertable.add('insert2', Com2);\ninsertable.add('insert2', Com1);\n// 普通的 html 标签也支持\ninsertable.add('insert2', 'div');\n\n(window as any).insertable = insertable;\n\nexport default <insertable.view>\n\t{/* 使用 insert-view 组件在插入注册的组件 */}\n\t{/* name 为注册的名称 */}\n\t{/* <insert-view /> 会渲染出指定注册名的所有组件 */}\n\t{/* <insert-view /> 会将属性及事件传递给组件 */}\n\t<Insertable.View name=\"insert1\" customAttribute=\"myValue\" />\n\t{/* 渲染结果同下： */}\n\t{/* <Com1 name=\"insert1\" customAttribute=\"myValue\" /> */}\n\t{/* <Com2 name=\"insert1\" customAttribute=\"myValue\" /> */}\n\t{/* <Com1 name=\"insert1\" customAttribute=\"myValue\" /> */}\n\t{/* 同一组件组件在同一名称下注册多次，将会被渲染多次 */}\n\n\t<hr />\n\n\t<Insertable.View name=\"insert2\" customAttribute=\"myValue\" />\n\t{/* 渲染结果同下： */}\n\t{/* <Com3 name=\"insert2\" customAttribute=\"myValue\" /> */}\n\t{/* <Com2 name=\"insert2\" customAttribute=\"myValue\" /> */}\n\t{/* <Com1 name=\"insert2\" customAttribute=\"myValue\" /> */}\n\t{/* <div name=\"insert2\" customAttribute=\"myValue\" /> */}\n\t{/* 普通的 html 标签也支持 */}\n\n\t<hr />\n\n\t{/* <insert-view /> 如果被引入多次将会被渲染多次，，即便 name 相同 */}\n\t<Insertable.View name=\"insert1\" />\n\t{/* 渲染结果同下： */}\n\t{/* <Com1 name=\"insert1\" /> */}\n\t{/* <Com2 name=\"insert1\" /> */}\n\t{/* <Com1 name=\"insert1\" /> */}\n</insertable.view>;\n","import { render } from '@neep/core';\nimport  '@neep/web-render';\nimport  '@neep/devtools';\nimport App from './App';\nrender(App).$mount();\n"],"names":["console","fn","printError","String","map","value","def","devtools","renderHook","installDevtools","tools","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","NeepError","Error","constructor","message","tag","assert","v","nextFrameApi","nextFrame","renders","create","getRender","type","default","installRender","render","installMonitorable","api","install","apis","monitorable","getEventName","k","substr","test","addEventFromCollection","addEvent","events","names","Array","isArray","n","p","keys","f","EventEmitter","update","emitter","newHandles","push","on","updateInProps","props","custom","entName","listener","_names","Set","createEmit","omitNames","emit","name","event","res","omit","Reflect","get","markRead","filter","t","includes","_event","e","error","size","markChange","add","removed","delete","updateHandles","eventCancelHandles","_cancelHandles","oldHandles","clear","forEach","list","handles","ScopeSlot","SlotRender","Slot","Value","Deliver","Template","current","setCurrent","entity","oldEntity","$_valueIndex","$_serviceIndex","ret","$_values","length","$_services","constructors","initContext","context","addContextConstructor","safeify","constructors$1","initEntity","delayedRefresh","objectSet","wait","run","o","refresh","asyncRefresh","async","hooks","setHook","id","hook","$_hooks","set","callHook","exposed","isElementSymbol","Symbol","for","typeSymbol","nameSymbol","renderSymbol","componentsSymbol","configSymbol","isElement","createElement","attrs","children","node","undefined","slot","ref","argv","args","label","getLabel","l","ids","Nodes","IdMap","Map","createMountedNode","recoveryMountedNode","recursive2iterable","it","refList","setRefList","setRef","isRemove","getNodes","tree","component","unmount","iRender","removeNode","createValue","source","isNode","RegExp","createText","Date","toISOString","createPlaceholder","createAll","item","createList","createItem","_source$children","ltag","toLowerCase","mount","isValue","insertNode","getLastNode","getFirstNode","replace","newTree","oldTree","next","parent","getParent","updateList","newList","mountedMap","src","index","findIndex","old","updateItem","splice","has","last","nextNode","i","updateAll","Math","min","max","all","updateProps","draw","getSlots","slots","native","nativeList","ownKeys","el","renderSlots","createSlots","inserted","isProduction","setSlots","disabledKey","oldProps","define","isProps","newKeys","components","register","getComponents","Boolean","execSimple","nObject","delivered","execed","slotMap","created","childNodes","result","nodes","init","renderNode","exec","findComponent","components$1","replaceNode","_node$props","slotName","normalize","createExposed","cfg","$parent","_obj$parent","$component","$isContainer","$created","$destroyed","destroyed","$mounted","mounted","$unmounted","unmounted","completeList","setCompleteList","complete","createEntity","_obj$parent2","isContainer","h","bind","config","EntityObject","container","parentDelivered","canRefresh","_delayedRefresh","needRefresh","_needRefresh","requestDraw","_refreshing","_render","_nodes","convert","_update","_destroy","destroy","__executed_destroy","_mount","__executed_mount","exec$1","c","_cancelDrawMonitor","stop","_unmount","__executed_mounted","_draw","nativeNodes","createContext","initRender","changed","resultOnly","monitor","stopRender","ComponentEntity","_this$iRender$createC","_this$iRender","encase","assign","_shadow","createComponent","call","_stopRender","markDraw","shadowTree","nativeTree","toElement","createItem$1","createAll$1","_source$props","ContainerEntity","newDelivered","updateList$1","updateItem$1","updateAll$1","_source$props2","awaitDraw","requested","drawAll","rootContainer","_drawChildren","setChildren","setProps","_drawContainer","content","_node","_container","drawChildren","drawContainer","_this$parent","_drawSelf","_needDraw","_this$parent2","drawSelf","remove","_this$parent3","_awaitDraw","markDrawContainer","needDraw","drawNode","_containers","containers","refs","r","params","target","Mark","symbol","mName","mSimple","installNeep","install$1","getId","updateId","removeAttribute","getClass","split","classes","oClasses","getAttribute","classList","setAttribute","join","updateClass","class","getStyle","style","css","update$1","oStyle","cssText","removeProperty","setProperty","updateStyle","hasStyle","setAttrs","HTMLInputElement","checked","HTMLSelectElement","stringify","data","isOn","toString","JSON","getAttrs","update$2","updateAttrs","createEventEmitter","__eventBind","getElementModel","currentTarget","updateEvent","prop","eventBind","addEventListener","removeEventListener","PropsMap","WeakMap","update$3","CSSStyleDeclaration","window","requestAnimationFrame","fs","xmlnsMap","svg","html","mathml","SVGTags","MathMLTags","tagname","namespace","ns","document","createElementNS","tagRegex","isTagName","Node","className","querySelector","Element","appendChild","body","oldTarget","newNode","pNode","text","createTextNode","createComment","attachShadow","mode","parentNode","nextSibling","insertBefore","removeChild","getRect","top","right","bottom","left","width","height","getBoundingClientRect","ShadowRoot","host","install$2","Type","getTree","_component$exposed","tagId","$label","placeholder","simple","isNative","standard","treeValue","special","getValue","TextNode","getKey","getLabels","labels","color","Tag","options","opened","getList","hasChildNodes","onclick","PlaceholderTag","labelList","deliver","template","scopeSlot","slotRender","Tree","Devtools","Settings","asValue","creating","app","getData","$update","$mount","contextConstructor","__NeepInsertable__","installContextConstructor","InsertView","insertable","contextInsertable","Insertable","installComponents","Neep","info","order","groups","_groups","freeze","sort","a","b","oldList","slice","parentList","allList","view","View","Com1","customAttribute","Com2","Com3","App"],"mappings":"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"}