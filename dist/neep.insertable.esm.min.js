/*!
 * NeepInsertable v0.1.0-alpha.3
 * (c) 2020-2021 Fierflame
 * @license MIT
 */
function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let t,n,r,o,i,s,c,a,u,l,f;function p(e,{childNodes:t}){const{name:n}=e;if("string"!=typeof n){const{insertable:n}=e;return n instanceof d?r(u,{value:n},...t()):o(t())}const{insertable:i}=e;if(i instanceof d){const o=i.get(n);return o?r(u,{value:i},o.map(n=>r(n.component,e,...t()))):null}const s=l();if(!s)return o(t);const c=s.get(n);return c?o(c.map(n=>r(n.component,e,...t()))):null}var m=[function(){u=i()},function(){f=s(p,{name:"InsertView"})},function(){n("InsertView",f),n("insert-view",f)},function(){l=c({name:"withInsertable",create:()=>a(u)})}];function h(e){!function(e){({encase:t,register:n,createElement:r,createTemplateElement:o,createDeliverComponent:i,createShellComponent:s,createWith:c,withDelivered:a}=e)}(e);for(const e of m)e()}const g="0.1.0-alpha.3";class d{constructor(n){e(this,"parent",void 0),e(this,"_groups",t(Object.create(null))),n instanceof d&&(this.parent=n)}add(e,t,n={}){"number"==typeof n&&(n={order:n});const r=this._groups;Array.isArray(t)||(t=[t]);const o=r[e]?[...r[e]]:[];o.push(...t.map(e=>Object.freeze({...n,component:e}))),o.sort(({order:e},{order:t})=>(e||0)-(t||0)),r[e]=o}remove(e,t){const n=this._groups,r=n[e];if(!r)return;if(!t)return void(n[e]=[]);const o=r.findIndex(e=>e.component===t);if(o<0)return;const i=[...r.slice(0,o),...r.slice(o+1)];n[e]=i}set(e,t,n={}){"number"==typeof n&&(n={order:n});const r=this._groups;Array.isArray(t)||(t=[t]);const o=t.map(e=>Object.freeze({...n,component:e}));r[e]=o}get(e,t){const n=this._groups[e]||[];if(!t||!this.parent)return[...n];const r=this.parent.get(e,"number"==typeof t?t-1:-1),o=[...r,...n];return n.length&&r.length&&o.sort(({order:e},{order:t})=>(e||0)-(t||0)),o}get view(){const e=s((e,...t)=>p({...e,insertable:this},...t),{name:"Insertable"});return Reflect.defineProperty(this,"view",{value:e,enumerable:!0,configurable:!0}),e}static get install(){return h}static get View(){return f}static get version(){return"0.1.0-alpha.3"}}export default d;export{f as InsertView,f as View,h as install,g as version,l as withInsertable};
